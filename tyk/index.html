<!DOCTYPE html>
<html>
<head>
  <title>–¢–∏–∫–∞–Ω–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="tykstyle.css" rel="stylesheet" type="text/css">
</head>
<style>
  *, *::before, *::after {
  box-sizing: border-box;
  }


 
  #dialogoverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
  }
  #dialogbox {
    position: fixed;
    top: 100px; left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 20px;
    border-radius: 8px;
    z-index: 1001;
    max-width: 90%;
    max-height: 80vh;
    overflow: auto;
  }
  .pure-material-button-contained {
    padding: 8px 16px;
    background: #2196f3;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  
  .active-shift {
    background-color: #ffeb3b !important; /* –Ø—Å–∫—Ä–∞–≤–æ-–∂–æ–≤—Ç–∏–π */
    color: black !important;
    font-weight: bold;
  }


</style>

<body>
<noscript><p class="aRed">–£ –≤–∞—à–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ JavaScript –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ!</p></noscript>

<div class="upperBox">
  <div class="box"> 
    <div class="hmenubar">
      <a class="button" title="–¢—É—Ç –º–æ–∂–Ω–∞ –æ–±—Ä–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—É –≤–ø—Ä–∞–≤—É" onclick="lessonSelect()">&nbsp;&nbsp;&nbsp;–í–ø—Ä–∞–≤–∏&nbsp;&nbsp;&nbsp;</a>
      <a class="button" title="–¢—É—Ç –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø–æ—Å—Ç—É–ø —É –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –≤–ø—Ä–∞–≤–∏" id="exercise" onclick="showProgress()">&nbsp;&nbsp;&nbsp;–ü–æ—Å—Ç—É–ø&nbsp;&nbsp;&nbsp;</a>
      <a class="button" title="–¢—É—Ç –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –ø—Ä–æ —Ü—é –ø—Ä–æ–≥—Ä–∞–º—É" onclick="about()">&nbsp;&nbsp;–ü—Ä–æ "–¢–∏–∫–∞–Ω–∫—É"&nbsp;&nbsp;</a>
    </div>
  </div>
  <div id="taskBox">
    <div id="leftPart">–©–æ—Å—å –Ω–µ —Ç–∞–∫,&nbsp; </div>
    <div id="rightPart">–º–∞—î –±—É—Ç–∏ –≤–ø—Ä–∞–≤–∞</div>
  </div>
  <div id="progressBar" noshade style="width:0%;"></div>
</div>

<h1 class="title" id="message">–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä '–¢–∏–∫–∞–Ω–∫–∞'</h1>

<div class="keyboard">
  <ul class="row row-0">
    <li class="pinky" id="tilda">~</li>
    <li class="pinky" id="1">1</li>
    <li class="ring" id="2">2</li>
    <li class="middle" id="3">3</li>
    <li class="pointer1st" id="4">4</li>
    <li class="pointer2nd" id="5">5</li>
    <li class="pointer2nd" id="6">6</li>
    <li class="pointer1st" id="7">7</li>
    <li class="middle" id="8">8</li>
    <li class="ring" id="9">9</li>
    <li class="pinky" id="0">0</li>
    <li class="pinky" id="minus">-</li>
    <li class="pinky" id="plus">+</li>
    <li class="pinky" id="backspace">‚ÜêBack</li>
  </ul>
  <ul class="row row-1">
    <li class="pinky" id="tab">Tab ‚Üπ</li>
    <li class="pinky" id="Q">Q</li>
    <li class="ring" id="W">W</li>
    <li class="middle" id="E">E</li>
    <li class="pointer1st" id="R">R</li>
    <li class="pointer2nd" id="T">T</li>
    <li class="pointer2nd" id="Y">Y</li>
    <li class="pointer1st" id="U">U</li>
    <li class="middle" id="I">I</li>
    <li class="ring" id="O">O</li>
    <li class="pinky" id="P">P</li>
    <li class="pinky" id="lsc">[</li>
    <li class="pinky" id="rsc">]</li>
    <li class="pinky" id="bckslash">\</li>
  </ul>
  <ul class="row row-2">
    <li class="pinky" id="capslock">CapsLock</li>
    <li class="pinky" id="A">A</li>
    <li class="ring" id="S">S</li>
    <li class="middle" id="D">D</li>
    <li class="pointer1st" id="F">F</li>
    <li class="pointer2nd" id="G">G</li>
    <li class="pointer2nd" id="H">H</li>
    <li class="pointer1st" id="J">J</li>
    <li class="middle" id="K">K</li>
    <li class="ring" id="L">L</li>
    <li class="pinky" id="ddot">:</li>
    <li class="pinky" id="apo">''</li>
    <li class="pinky" id="enter">Enter‚Üµ</li>
  </ul>
  <ul class="row row-3">
    <li class="pinky" id="shiftleft">‚áßShift</li>
    <li class="pinky" id="Z">Z</li>
    <li class="ring" id="X">X</li>
    <li class="middle" id="C">C</li>
    <li class="pointer1st" id="V">V</li>
    <li class="pointer2nd" id="B">B</li>
    <li class="pointer2nd" id="N">N</li>
    <li class="pointer1st" id="M">M</li>
    <li class="middle" id="comma">,</li>
    <li class="ring" id="dot">.</li>
    <li class="pinky" id="slash">/</li>
    <li class="pinky" id="shiftright">‚áßShift</li>
  </ul>
  <ul class="row row-4">
    <li class="pinky" id="controlleft">Ctrl</li>
    <li class="pinky" id="metaleft">‚åò</li>
    <li class="ring" id="altleft">Alt</li>
    <li class="pointer2nd" id="space"></li>
    <li class="ring" id="altright">AltGr</li>
    <li class="pinky" id="metaright">‚åò</li>
    <li class="pinky" id="menu">‚â£</li>
    <li class="pinky" id="controlright">Ctrl</li>
  </ul>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  var exercises = [  
    "–∞–∞–∞–æ–æ–æ –∞–∞–æ–∞–æ –æ–∞–∞–æ–æ –∞–æ–∞–æ–∞ –∞–æ –æ–∞–æ –≤–≤–≤–æ–æ–æ –≤–≤–æ–≤–æ –æ–≤–≤–æ–æ –≤–æ–≤–æ–≤ –≤–æ –≤–≤–∞–≤–∞ –∞–≤–≤–∞–∞ –≤–∞–≤–∞–≤ –∞–∞–≤–∞–≤ –∞–≤ –∞–≤ –≤–æ–≤–∞ –≤–æ–≤–∞",
    "–ª–ª–ª–≤–≤–≤ –ª–ª–≤–ª–≤ –≤–ª–ª–≤–≤ –∞–∞–∞–ª–ª–ª –∞–∞–ª–∞–ª –ª–∞–∞–ª–ª –∞–ª–∞–ª–∞ –∞–ª–ª–∞ –≤–∞–ª –ª–∞–≤–∞ –æ–æ–ª–æ–ª –ª–æ–æ–ª–ª –æ–ª–æ–ª–æ –ª–æ–≤ –ª–æ–ª–∞ –æ–≤–∞–ª –∞–ª–ª–æ –æ–ª–æ–≤–æ",
    "–¥–¥–¥–≤–≤–≤ –¥–≤–≤–¥–≤ –¥–≤–¥–≤–¥ –∞–¥–∞–¥–¥ –∞–¥–∞–¥–∞ –¥–∞–∞–¥–∞ –¥–∞ –¥–∞–≤ –¥–≤–∞ –¥ –ª–¥–ª–ª–¥ –ª–¥–¥–ª–¥ –æ–¥–æ–æ–¥ –æ–¥–æ–¥–æ –¥–æ –ª–∞–¥ –æ–¥–∞ –ª–∞–¥–∞ –≤–æ–¥–∞ –≤–ª–∞–¥–∞",
    "—ñ—ñ—ñ–¥–¥–¥ —ñ–¥—ñ—ñ–¥ —ñ–¥—ñ–¥—ñ –¥—ñ–¥ —ñ–≤—ñ–≤–≤ —ñ—ñ–≤—ñ–≤ –≤—ñ–¥ —ñ–ª–ª—ñ–ª —ñ–ª—ñ—ñ–ª –¥—ñ–ª —ñ–∞—ñ–∞—ñ —ñ–∞–∞—ñ–∞ –¥–∞–ª—ñ —ñ–æ—ñ—ñ–æ —ñ–æ–æ—ñ–æ –¥—ñ–ª–æ –≤–æ–¥—ñ –¥–æ–≤–æ–ª—ñ",
    "—Ñ—Ñ—Ñ–¥–¥–¥ —Ñ—Ñ–¥—Ñ–¥ –¥—Ñ—Ñ–¥–¥ —Ñ–¥—Ñ–¥—Ñ –¥–¥—Ñ–¥—Ñ —Ñ–∞—Ñ–∞—Ñ –∞–∞—Ñ–∞—Ñ –¥–∞—Ñ —Ñ–ª—Ñ—Ñ–ª –ª—Ñ–ª—Ñ–ª —Ñ–∞–ª –ª–∞—Ñ–∞ —Ñ–æ—Ñ–æ—Ñ —Ñ–æ–ª —Ñ—ñ—Ñ—ñ—Ñ —Ñ–≤—Ñ—Ñ–≤ –ª—ñ—Ñ —Ñ—ñ–ª—ñ–∞–ª",
    "–∂–∂–∂—Ñ—Ñ—Ñ –∂–∂—Ñ–∂—Ñ —Ñ–∂–∂—Ñ—Ñ –∂—Ñ–∂—Ñ–∂ –∞–∂ –∂—ñ–∂–∂—ñ —ñ—ñ–∂—ñ–∂ —ñ–∂ –∂–¥–∂–∂–¥ –∂–¥–¥–∂–¥ –¥—ñ–∂–∞ —Ñ—ñ–¥–∂—ñ –∂–≤–≤–∂–≤ –∞–∂–∞–∂–∞ –∂–∞–ª—ñ–≤ –ª–∂–ª–∂–∂ –ª–æ–∂–∞ –∂–∞–ª–æ",
    "–º–º–º–∂–∂–∂ –º–º–¥–º–¥ –º–æ–º–æ–º –ª–º–º–ª–ª –º–∞–º–∞–º –º–∞–º–∞ –º–æ–¥–∞ –º—ñ–º–º—ñ –º—ñ–∂ –º—ñ–ª–∞ –º–≤–≤–º–≤ –≤–∞–º –º–∞–ª–æ —Ñ–º—Ñ—Ñ–º —Ñ–º –º—ñ—Ñ –≤—ñ–º –º–æ–≤–∞ –≤–∞–º –ª–æ–º",
    "–º–º–º—Ç—Ç—Ç –º–º—Ç–º—Ç —Ç–º—Ç—Ç–º –º—Ç–º—Ç–º —Ç—Ç–º—Ç–º —Ç–∞ —Ñ–∞—Ç–∞ –ª—ñ—Ç–∞ —Ç–æ—Ç—Ç–æ –º–æ—Ç–æ –ª–æ—Ç –ª—ñ—Ç–æ —Ç–æ–º —Ç–æ–¥—ñ –ª—ñ—Ñ—Ç —Ç–∞ —Ñ–æ—Ç–æ —Ñ–ª–æ—Ç –∞—Ç–æ–º –∂–º–æ—Ç",
    "–∏–∏–∏—Ç—Ç—Ç –∏–∏—Ç–∏—Ç —Ç–∏–∏—Ç—Ç —Ç–∏ –≤–∏ –∞–∏–∞–∞–∏ –∞–∏–∞–∏–∞ –∂–∞–¥–∞—Ç–∏ –∂–∏—Ç–æ –∏–∏–º–∏–º –º–∏–∏–º–∏ –º–∏ —Ç–∏ –º–∏–º–æ –º–∏–ª–æ –∂–¥–∞—Ç–∏ –º–∞—Ç–∏ –∂–∞–ª–∏—Ç–∏ –∂–∏–≤—ñ—Ç",
    "—å—å—å–∏–∏–∏ —å—å–∏—å–∏ —Ç—Ç—å—Ç—å —å—Ç—Ç—å—å –∂–∏—Ç—å –ª–æ–≤–∏—Ç—å –º–º—å–º—å —å–º—å–º—å —Ç—å–º–∞ –º—ñ–ª—å —Ñ—ñ–ª—å–º –≤–∏–º–∏—Ç—å –æ—å—å–æ—å —Ç–æ–ª—å –≤–∏–≤–æ–¥–∏—Ç—å –º–æ–ª–æ—Ç–∏—Ç—å",
    "–ø–ø–ø–æ–æ–æ –ø–ø–∞–ø–∞ –≤–ø–ø–≤–≤ –ø—ñ–ø—ñ–ø –ª–ª–ø–ª–ø –ø—Ñ—Ñ–ø—Ñ –ø–ø–∂–∂ –º–ø–∏–ø–º –ø—Ç–ø—å–ø –ø–æ–ª–∞ –ø—ñ–ø –ø–æ–ª –ø–∏–∂ –≤–∏–ø–∞–≤ —Ñ–∞–ø –ø–∞–¥–∞–≤ –ø—ñ–¥–≤–∞–ª –ø–æ–º–∏—Ç–∏",
    "–ø–ø–ø—Ä—Ä—Ä –ø–ø—Ä–ø—Ä —Ä–ø–ø—Ä—Ä –ø—Ä–ø—Ä–ø —Ä—Ä–ø—Ä–ø –ø–∏—Ä –ø–∞—Ä —Ä—ñ–ø–∞ —Ä–∏—Ñ —Ä–∏–ª–æ –ø–∞—Ä–∞ –ø–æ—Ä–∏ –ø–æ—Ä—Ç –ø—Ä–∞–≤–¥–∞ –ø—Ä–æ—Ä–∏–≤ —Ä–∞–ø—ñ—Ä–∞ –ø–∏—Ä –ø—Ä–æ–ø–∞–∂–∞",
    "–∫–∫–∫—Ä—Ä—Ä –∫–∫–ª–∫–ª —ñ–∫–∫—ñ—ñ —Ä—ñ–∫ –∫—Ä–∏–∫ —Ä–∏–∫ –≤–∫ –≤—ñ–∫ –≤–∏–∫—Ä–∏–∫ –∫–æ–æ–∫–æ –∫–æ–¥ –∫—ñ–ª–æ–∫ –∫—ñ—Ç –ª—ñ–∫–æ—Ç—å –∞–∫–∫–∞–∫ –º–∞–∫—ñ –ø—ñ–¥–∫–æ–≤–∫–∞ –ø–ª–∞–∫–∞—Ç–∏",
    "–∫–∫–∫–≥–≥–≥ –∫–∫–≥–∫–≥ –∫–≥ –≥–∞–∫ –≥–æ–ª –∫–≥–∫–∫–≥ –≥–∫–≥–∫–≥ –≥—ñ—Ä–∫–æ –≥—Ä–∞—Ñ –≤–∞–≥–∞ –æ–≥–≥–æ–≥ —Ä–≥—Ä—Ä–≥ –≥–æ—Ä–∞ –≤–æ—Ä–æ–≥ –∫—ñ–≥–æ—Ç—å –∫—ñ–≥—Ç–∏–∫ –∫—ñ–≥—Ç—ñ –≥—Ä–∏—Ñ–∞",
    "–µ–µ–µ–≥–≥–≥ –µ–µ–∫–µ–∫ –∞–µ–µ–∞–µ –ø–µ–ø–µ–ø –¥–µ –≤—ñ—Ç–µ—Ä —Ä–µ–ª–µ —Ä–µ–∂–∏–º –¥–∂–µ–º–ø–µ—Ä –∫–µ–∫–µ–∫ –µ–ø–ø–µ–ø –ª–µ–ø–µ—Ç –ø–µ—Ä–æ —Ç–æ—Ä–ø–µ–¥–∞ —Ç–µ–ø–µ—Ä –∂–µ —Ä–µ—Ñ–µ—Ä–∞—Ç",
    "–µ–µ–µ–Ω–Ω–Ω –≥–Ω–≥–Ω–Ω —Ä–Ω—Ä—Ä–Ω –æ–Ω–æ–Ω–æ —Ñ–∞–Ω–µ—Ä–∞ –ª–∏–ø–µ–Ω—å –∂–æ–≤—Ç–µ–Ω—å –ø—ñ–≤–µ–Ω—å –ø–µ—Ä–∏–Ω–∞ –º–æ–Ω–µ—Ç–∏ –ø–µ–Ω—å –ø—Ä–∏–º—ñ—Ä —Ä–µ–º—ñ–Ω—å –Ω–∞ –∞—Ä–µ–Ω—ñ –ø–æ–Ω—ñ",
    "—É—É—É–Ω–Ω–Ω —É–æ–æ—É–æ –≤—É–≤–≤—É —Ñ—É–≥–∞ –∫—É—Ç –∫—É—Ç–æ–∫ —Ä–∞–≥—É —É–∞—É–∞—É —É—ñ—ñ—É—ñ –ª—É–ª–ª—É –≤—É–≥—ñ–ª—å —É—Ç–∫–∞ –ª—É–≥ –∫—Ä—É–≥ –¥—É–≥–∞ –¥–∂–≥—É—Ç –≥—É–¥–æ–∫ –≥—Ä—É–ø–∞",
    "—É—É—É—à—à—à –æ—à—à–æ—à –ª—à–ª—à–ª –≥—à–≥–≥—à —à—É–º —à—É—Ä—É–ø –∫—É—à –¥—É—à —Ñ—ñ—à–∫–∞ —à—É–º—ñ—Ç–∏ —à—É–º—É–≤–∞—Ç–∏ —à–∏—à–∫–∞ —à–∫–≤–∞–ª –∫–∏—à–∫–∞ —à–∫—É—Ä–∞ —É–∫—É—à—É –≥—Ä—É—à—É",
    "—Ü—Ü—Ü—à—à—à —Ü—Ü–≤—Ü–≤ —Ü—Ñ—Ü—Ñ—Ü —Ü—ñ—ñ—Ü—ñ —Ü—ñ–ª–∏—Ç–∏ —Ü—ñ–ª—å —Ü–¥—Ü–¥–¥ —Ü—ñ–¥–∏—Ç–∏ —Ü–∞—Ü—Ü–∞ —Ü—ñ–Ω–∞ –ª–∏—Ü–µ —Ü–∞—Ä–∏—Ü—ñ —Ü—É—Ü—É—Ü —Ü—É–∫–æ—Ä –∫—Ü–∫–∫—Ü —Ü–∏—Ä–∫ —Ü–µ–Ω—Ç",
    "—â—â—â—Ü—Ü—Ü —â—à—â—à—â —â–¥—â–¥—â —â–ª—â—â–ª —â—â–∂—â–∂ —â–∏—Ç —â—É–∫–∞ –¥–æ—â —Ç–µ—â–∞ —â–æ–∫–∞ —â–∏–ø—Ü—ñ –∂–∞–ª–æ—â—ñ —â—ñ–ª–∏–Ω–∞ —â–∞–≤–µ–ª—å —â–∏–≥–ª–∏–∫ –ø–∏—â–∞—Ç–∏ —â–æ —Ü–µ",
    "–π–π–π—â—â—â –π—Ñ–π—Ñ–π —Ü–æ–π —Ü—ñ–ª–∏—Ç–∏ —Ü—ñ–ª—å —Ü–¥—Ü–¥–¥ —Ü—ñ–¥–∏—Ç–∏ —Ü–∞—Ü—Ü–∞ —Ü—ñ–Ω–∞ –ª–∏—Ü–µ —Ü–∞—Ä–∏—Ü—ñ —Ü—É—Ü—É—Ü —Ü—É–∫–æ—Ä –∫—Ü–∫–∫—Ü —Ü–∏—Ä–∫ —Ü–µ–Ω—Ç",
    "–π–π–π–∑–∑–∑ –∂–∑–∂–∑–∂ —â–∑–∑—â–∑ –¥–∑–¥–¥–∑ –∑–ª–∏–π –∑–∞—Ä–∞–∑–Ω–∏–π –∑–∞–π–∫–∞ —Ñ–∑—Ñ—Ñ–∑ —Ñ–∞–∑–∞–Ω –≥—Ä—É–∑–¥—å –∑–∏–≥–∑–∞–≥ –∑–∞–∑–æ—Ä –∑–∞—à–∏—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ —â–æ –∑–∞ —Ü–µ",
    "–π–π–π—Ö—Ö—Ö –∑—Ö–∑—Ö—Ö –∂—Ö—Ö–∂—Ö –ª—à—â–∑—Ö –∂–∞—Ö —Ö–∞–Ω —Ö—Ä–∞–º –∫—ñ—Ä—Ö–∞ —à–∞—Ö —Ö–∞–ª—ñ—Ñ —Ö–æ—Ä–æ—à–∞ —Ö–∞—Ç–∞ —Ö–∞–ª—É–ø–∞ –∑–∞–ø–∞—Ö–∏ —Ö—É–¥–∏–π —Ö–∏–∂–∞–∫ –Ω–∞ –Ω–æ–≥–∞—Ö",
    "—Ñ—Ñ—Ñ—î—î—î –∂—î–∂–∂—î –∑—î–∑—î–∑ —Ö—î—î—Ö—î –¥–∂—î–¥—î –ª–∂—î–ª–∂ —Ç–µ—î –≤—ñ—î –¥–∞–≤–Ω—î –¥–≤–æ—î –∑–∞—î—Ü—å —î–≤—Ä–æ–ø–∞ –∂–∏—Ç—ñ—î –≥–µ—î–Ω–∞ —î–≥–∏–ø–µ—Ç —à–∫–æ–¥—É—î –Ω–µ–º–∞—î",
    "—Å—Å—Å—î—î—î –≤—Å–≤—Å–≤ –ª—Å–ª—Å—Å –∞—Å–∞–∞—Å —Å–∞–¥ –≤—É—Å–∞ –º–∞—Å–∞ —Å–æ—Å–æ–æ —ñ—Å—Å—ñ—Å –¥—Å–¥—Å–¥ —Ñ—Å—Ñ—Ñ—Å —à–∞–Ω—Å –∂–µ—Ä—Å—Ç—å –≥–∞—Å–∏—Ç–∏ —Å–≤—ñ—Ç–ª–∏–π –ø—ñ—Å–æ–∫ —î—Å—Ç–µ",
    "—Å—Å—Å–±–±–± –ª–±–ª–±–ª –æ–±–±–æ–± –¥–±–¥–¥–± –≤–±–≤–±–± –∂–±–∂–∂–± –±–æ–∫—Å —Å–æ–±–æ—Ä —Å–æ–±–æ–ª—å –±–∞—Ä—Å —Å—É–±–æ—Ç–∞ –±–∞—Ç—å–∫–æ —Ñ–∞–±—Ä–∏–∫–∞ —â–µ–±—ñ–Ω—å –±—É—Ç–∏ —Ä–æ–±–∏—Ç—å",
    "—á—á—á–±–±–± —ñ—á—ñ—á—ñ —Ñ—á—Ñ—Ñ—á —á—É–± –ø—ñ—á –±–æ—á–æ–∫ –±—Ä–∏—á–∫–∞ —á–≤—á–≤–≤ –¥–¥—á–¥—á –±–∞—á–∏—Ç—å —á–∞—Ö–Ω—É—Ç–∏ —á–∞—Ä–∏ —á–∏ —á–∞—Å–Ω–∏–∫ —á–æ—Ä–Ω–∏–π —á—î—Ä—î–∑ –æ–±—Ä—É—á",
    "—á—á—á—é—é—é –¥—é–¥—é–¥ –∂—é—é–∂—é –¥—é–Ω–∞ —Å—é–∂–µ—Ç –∫–ª—é—á –∫–æ–ª—é—á—ñ –≥–ª—é—á–Ω—ñ –ª—é–ª–ª—é —é–±–±—é–± –±—Ä—é—á–Ω—ñ –±—Ä—é–Ω–µ—Ç –±—é–¥–∂–µ—Ç —é—Ä–∏—Å—Ç —Ñ–ª—é–≥–µ—Ä –º—é—Å–ª—ñ",
    "—é—é—é—è—è—è —Ñ—è—Ñ—è—Ñ –≤—è—è–≤—è —ñ—è—ñ—ñ—è —á—è—á—è—è —è–∫—ñ —è–∫—â–æ –∑–∞–π—Ü—è —è—â—ñ—Ä —è—â–∏–∫ —à—É—Ö–ª—è–¥–∞ —è—Ö—Ç–∞ –±–ª—è—Ö–∞ —Å—è—î —Ö–≤–æ—è —Ö–∞—Ä—Ç—ñ—è –≥–∞–ª—è —é–ª—ñ—è",
    "—è—è—è... –∂.–∂.–∂ —é..—é. —î.—î—î. —ñ —Ç. –¥. —ñ —Ç. –ø. —Ç–∞ —ñ–Ω. –º–µ–¥. –º—É–∑. —ñ —Å–ª. —à–∫. –º. –∞–Ω–≥–ª. –≥—Ä–µ—Ü. –ª–∞—Ç. —É–∫—Ä. —Ñ—Ä. —è–ø.",
    "...,,, —è,—è,, —è, —Ç–∏, –≤—ñ–Ω, –≤–æ–Ω–∞... —Ä–∞–∑, –¥–≤–∞, —Ç—Ä–∏, —á–æ—Ç–∏—Ä–∏... —Ç–æ—á–∫–∞, —Ç–æ—á–∫–∞, –∫–æ–º–∞. –∑–∞–≥–∞–ª–æ–º, –≤—Å–µ —Ç–∞–∫ —Å–∞–º–æ.",
    "–¢–æ–∫–º–∞–∫ –ö–∏—ó–≤ –õ—å–≤—ñ–≤ –ú–∏—Ä–≥–æ—Ä–æ–¥ –ù–µ—Ç—ñ—à–∏–Ω –û–¥–µ—Å–∞ –ü–æ–ª—Ç–∞–≤–∞ –†—ñ–≤–Ω–µ –¢–µ—Ä–Ω–æ–ø—ñ–ª—å –£–∂–≥–æ—Ä–æ–¥ –•–∞—Ä–∫—ñ–≤ –ß–µ—Ä–Ω—ñ–≥—ñ–≤ –®–æ—Å—Ç–∫–∞ –ë–µ–ª–∑",
    "–î–∂–µ–∫ –õ–æ–Ω–¥–æ–Ω. –°–º–æ–∫ –ë–µ–ª–ª—å—é –π—à–æ–≤ –∑–¥–æ–≤–∂ –±–µ—Ä–µ–≥–∞, —Ö–∏—Ç–∞—é—á–∏—Å—å –≤—ñ–¥ –ø–æ—Ä–∏–≤—ñ–≤ —á—É–∂–æ–≥–æ –≤—ñ—Ç—Ä—É, —â–æ –≤–∑—è–≤—à–∏ –º–∞–π–∂–µ –Ω–µ–Ω–∞—Å—Ç–∞–Ω–Ω–æ. –£ —Å—ñ—Ä–æ–º—É —Å–≤—ñ—Ç—ñ —à–µ—Å—Ç–µ—Ä–æ —á–æ–≤–Ω—ñ–≤ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏ –¥–æ—Ä–æ–≥–æ—Ü—ñ–Ω–Ω–æ—é –ø–æ–∫–ª–∞–∂–µ—é, –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—é —á–µ—Ä–µ–∑ –ß—ñ–ª—å–∫—É—Ç... –§–∞—ó–Ω–∞, –Ñ–≤—Ä–æ–ø–∞."
  ];

  var taskString = exercises[0];
  var totalChars;
  var lang = "ua";
  var taskNum = 1;
  var countChars = 0;
  var currentKey = '';
  var keyShift;
  var capsState = false;
  var charRight = '';
  var correctChars = 0;
  var incorrectChars = 0;
  var started = false;
  var strLeft = '';
  var timeDuration = 0;
  var timeStart = 0;
  var timeEnd = 0;
  var charKey = ' ';
  let shiftStates = { left: false, right: false };
  let inputLocked = false;


  const keys = ["tilda","1","2","3","4","5","6","7","8","9","0","minus","plus","Q","W","E","R","T","Y","U","I","O","P","lsc","rsc","bckslash","A","S","D","F","G","H","J","K","L","ddot","apo","Z","X","C","V","B","N","M","comma","dot","slash","space"];
  const cyrUp = [" º","!","\"","‚Ññ",";","%"," :", "?", "*", "(", ")", "_", "+", "–ô", "–¶", "–£", "–ö", "–ï", "–ù", "–ì", "–®", "–©", "–ó", "–•", "–á", "“ê", "–§", "–Ü", "–í", "–ê", "–ü", "–†", "–û", "–õ", "–î", "–ñ", "–Ñ", "–Ø", "–ß", "–°", "–ú", "–ò", "–¢", "–¨", "–ë", "–Æ", ",", " "];
  const engUp = ["~","!","@","#","$","%","^","&","*","(",")","_","+","Q","W","E","R","T","Y","U","I","O","P","{","}","|","A","S","D","F","G","H","J","K","L",":","\"","Z","X","C","V","B","N","M","<",">","?"," "];
  const cyrLow = ["'","1","2","3","4","5","6","7","8","9","0","-","=","–π","—Ü","—É","–∫","–µ","–Ω","–≥","—à","—â","–∑","—Ö","—ó","“ë","—Ñ","—ñ","–≤","–∞","–ø","—Ä","–æ","–ª","–¥","–∂","—î","—è","—á","—Å","–º","–∏","—Ç","—å","–±","—é","."," "];
  const engLow = ["`","1","2","3","4","5","6","7","8","9","0","-","=","q","w","e","r","t","y","u","i","o","p","[","]","\\","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",",".","/"," "];

  // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –∫–ª—ñ–∫—ñ–≤
  function setupKeyHandlers() {
    const keyElements = document.querySelectorAll('.keyboard li');
    keyElements.forEach(key => {
      key.removeEventListener('click', keyClickHandler);
      key.removeEventListener('touchstart', keyClickHandler);
      key.addEventListener('click', keyClickHandler);
      key.addEventListener('touchstart', keyClickHandler, { passive: true });
    });
  }

  function keyClickHandler(e) {
    e.preventDefault();
    const keyElement = this;
    const keyId = keyElement.id;

    // –û–±—Ä–æ–±–∫–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏—Ö Shift-–∫–ª–∞–≤—ñ—à
    if (keyId === "shiftleft" || keyId === "shiftright") {
      const side = keyId === "shiftleft" ? "left" : "right";
      shiftStates[side] = !shiftStates[side]; // –¢—É–º–±–ª–µ—Ä

      if (shiftStates[side]) {
        keyElement.classList.add("active-shift");
        keyShiftPressed(); // –£–≤—ñ–º–∫–Ω—É—Ç–∏ –≤–µ—Ä—Ö–Ω—ñ–π —Ä–µ–≥—ñ—Å—Ç—Ä
      } else {
        keyElement.classList.remove("active-shift");
        keyShiftUnPressed(); // –í–∏–º–∫–Ω—É—Ç–∏ –≤–µ—Ä—Ö–Ω—ñ–π —Ä–µ–≥—ñ—Å—Ç—Ä
      }
      return;
    }

  // –Ü–Ω—à–µ ‚Äî –∑–≤–∏—á–∞–π–Ω–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è
  const text = keyId === "space" ? " " : keyElement.textContent;
  key_Pressed(text, keyId);
}


  // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥–∫–∏
  function cyrLayoutLow() {
    for (let i = 0; i < 47; i++) {
      document.getElementById(keys[i]).textContent = cyrLow[i];
    }
  }
  function cyrLayoutUp() {
    for (let i = 0; i < 47; i++) {
      document.getElementById(keys[i]).textContent = cyrUp[i];
    }
  }
  function engLayoutLow() {
    for (let i = 0; i < 47; i++) {
      document.getElementById(keys[i]).textContent = engLow[i];
    }
  }
  function engLayoutUp() {
    for (let i = 0; i < 47; i++) {
      document.getElementById(keys[i]).textContent = engUp[i];
    }
  }

  function capsLock(state) {
    if (state) {
      for (let i = 13; i < 47; i++) {
        const cU = lang === "eng" ? engUp[i] : cyrUp[i];
        document.getElementById(keys[i]).textContent = cU;
      }
    } else {
      for (let i = 13; i < 47; i++) {
        const cL = lang === "eng" ? engLow[i] : cyrLow[i];
        document.getElementById(keys[i]).textContent = cL;
      }
    }
  }

  function about() {
    let content = '–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∏–π –æ–Ω–ª–∞–π–Ω-—Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è —à–∫–æ–ª—è—Ä—ñ–≤ —ñ –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –Ω–∏—Ö.<br>\
–©–∏—Ä–∞ –ø–æ–¥—è–∫–∞:<br>\
- Pelle Lundgren (evilpaper) - –∑–∞ Keyboard Hero;<br>\
- —Å–ø—ñ–ª—å–Ω–æ—Ç—ñ KDE - –∑–∞ —É—Ä–æ–∫–∏ –¥–ª—è Ktouch;<br>\
- Animista.net - –∑–∞ css-–∞–Ω—ñ–º–∞—Ü—ñ—é;<br>\
- —Å–ø—ñ–ª—å–Ω–æ—Ç—ñ –≤—á–∏—Ç–µ–ª—ñ–≤ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏ "–®–∫—ñ–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –≤—ñ–¥ –ê –¥–æ –Ø" - –∑–∞ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è.<br>\
–ê–≤—Ç–æ—Ä: –ì—Ä–æ–º–∫–æ –ì.–Æ.';
    customAlert.alert(content, '–ü—Ä–æ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä');
  }

  function showProgress() {
    timeEnd = getTimestamp();
    if (timeStart === 0) timeStart = timeEnd;
    let taskTime = timeEnd - timeStart;
    let tMinuts = Math.floor(taskTime / 60);
    let tSeconds = taskTime % 60;
    let tTime = tMinuts + " —Ö–≤–∏–ª–∏–Ω " + tSeconds + " —Å–µ–∫—É–Ω–¥";
    let speed = Math.floor(correctChars / taskTime * 60);
    let correctness = Math.floor(correctChars / countChars * 100);
    let content = `—á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: ${tTime}<br>
                   –Ω–∞—Ç–∏–∫–∞–Ω–æ —Å–∏–º–≤–æ–ª—ñ–≤: ${correctChars}<br>
                   —à–≤–∏–¥–∫—ñ—Å—Ç—å: ${speed} —Å–∏–º–≤/—Ö–≤<br>
                   –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å: ${correctness}%<br>`;
    customAlert.alert(content, '–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–ø—Ä–∞–≤–∏');
  }

  function lessonSelect() {
    let content = '<select id="taskSelect" size="15">';
    for (let i = 0; i < exercises.length; i++) {
      content += `<option value="${i+1}">–í–ø—Ä–∞–≤–∞ ${i+1}</option>`;
    }
    content += '</select>';

    customAlert.alert(content, '–û–±–µ—Ä—ñ—Ç—å –≤–ø—Ä–∞–≤—É –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è');

    const select = document.getElementById("taskSelect");
    select.addEventListener("change", function () {
      const index = parseInt(select.value);
      startTyping(index);
    });
  }

  function taskEnd() {
    showProgress();
    taskNum++;
    if (taskNum > exercises.length) taskNum = 1;
    startTyping(taskNum);
  }

  function kbdSetup(up) {
    if (lang === "ua") {
      up ? cyrLayoutUp() : cyrLayoutLow();
    } else {
      up ? engLayoutUp() : engLayoutLow();
    }
  }

  function startTyping(n) {
    const highlightedKey = document.querySelector(".selected");
    if (highlightedKey) highlightedKey.classList.remove("selected");

    taskNum = n;
    document.getElementById('exercise').textContent = "–í–ø—Ä–∞–≤–∞ " + taskNum;
    taskString = exercises[n - 1];
    totalChars = taskString.length;
    lang = "ua";
    started = true;
    countChars = 0;
    correctChars = 0;
    incorrectChars = 0;
    strLeft = '';

    document.getElementById('leftPart').innerHTML = '&nbsp;';
    document.getElementById('rightPart').textContent = taskString.substr(0, 16);
    document.getElementById('progressBar').style.width = progressBar() + '%';

    kbdSetup(false);
    nextKey();
    setupKeyHandlers(); // üîÅ –ü–µ—Ä–µ—Ä–µ—î—Å—Ç—Ä–æ–≤—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏
  }

  function updateAll() {
    correctChars++;
    strLeft = strLeft.replace("&nbsp;", " ");
    if (charRight === " ") charRight = "&nbsp;";
    strLeft = strLeft.substr(-11) + charRight;
    document.getElementById('leftPart').innerHTML = strLeft;

    taskString = taskString.slice(1);
    let nbsp = '';
    let cst = 0;
    if (taskString[0] === ' ') { nbsp = "&nbsp;"; cst = 1; }
    document.getElementById('rightPart').innerHTML = nbsp + taskString.substr(cst, 16);
    document.getElementById('progressBar').style.width = progressBar() + '%';
  }

  function getKeyId(kkey) {
    let kcyr = cyrUp.indexOf(kkey.toUpperCase());
    if (kcyr === -1) kcyr = cyrLow.indexOf(kkey.toLowerCase());
    let keng = engUp.indexOf(kkey.toUpperCase());
    if (keng === -1) keng = engLow.indexOf(kkey.toLowerCase());
    let keyId = kkey;
    if (kcyr > -1) keyId = keys[kcyr];
    if (keng > -1) keyId = keys[keng];
    return keyId;
  }

  function keyShiftPressed() {
    if (capsState) kbdSetup(false);
    else kbdSetup(true);
  }

  function keyShiftUnPressed() {
    if (capsState) kbdSetup(true);
    else kbdSetup(false);
  }

  document.addEventListener("keydown", event => {
    if (event.key === "Shift") {
      keyShiftPressed();
      const shiftId = event.code === "ShiftLeft" ? "shiftleft" : "shiftright";
      keyShift = document.getElementById(shiftId);
      keyShift.classList.add("selected");
    }
    if (event.key === "CapsLock") {
      capsState = !capsState;
      capsLock(capsState);
    }
  });

function key_Pressed(event_key, key_id) {
  if (inputLocked) return;
  inputLocked = true;

  try {
    if (!started) {
      started = true;
      timeStart = getTimestamp();
    }

    currentKey = event_key;
    if (currentKey === 'GroupNext') return;

    countChars++;
    let keyPressed = key_id;

    if (event_key === "Shift") {
      keyShiftUnPressed();
      keyShift.classList.remove("selected");
    }

    const validKeys = ["Shift", "Control", "Meta", "Alt", "AltGraph", "Enter", "Tab", "Backspace", "CapsLock"];
    if (validKeys.includes(keyPressed)) {
      countChars--;
      return;
    }

    const keyElement = document.getElementById(keyPressed);
    if (keyElement) {
      keyElement.classList.add("hit");
      keyElement.addEventListener('animationend', () => {
        keyElement.classList.remove("hit");
      }, { once: true });
    }

    if (currentKey === taskString[0]) {
      charRight = currentKey;
      updateAll();
      const highlightedKey = document.querySelector(".selected");
      if (highlightedKey) highlightedKey.classList.remove("selected");
      if (correctChars < exercises[taskNum - 1].length) {
        nextKey();
      } else {
        taskEnd();
      }
    } else {
      if ((currentKey === taskString[0].toUpperCase()) || (currentKey === taskString[0].toLowerCase())) {
        document.getElementById("message").innerHTML = "–ó–º—ñ–Ω—ñ—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä —Å–∏–º–≤–æ–ª—ñ–≤!";
        setTimeout(() => {
          document.getElementById("message").innerHTML = "";
        }, 2000);
      }
      if (isLetter(currentKey) && currentKey.length === 1) {
        if ((isEng(currentKey) && isCyr(taskString[0])) || (isEng(taskString[0]) && isCyr(currentKey))) {
          document.getElementById("message").innerHTML = "–ó–º—ñ–Ω—ñ—Ç—å —Ä–æ–∑–∫–ª–∞–¥–∫—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏!";
          setTimeout(() => {
            document.getElementById("message").innerHTML = "";
          }, 2000);
        }
      }
    }
  } finally {
    // –ó–∞–≤–∂–¥–∏ –∑–Ω—ñ–º–∞—î–º–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
    setTimeout(() => {
      inputLocked = false;
    }, 200);
  }
}


  function isLetter(ckey) {
    return isEng(ckey) || isCyr(ckey);
  }
  function isEng(ckey) {
    return /[a-zA-Z]/.test(ckey);
  }
  function isCyr(ckey) {
    return /[–∞-—è—ñ—ó—î“ë–ê-–Ø–Ü–á–Ñ“ê]/.test(ckey);
  }

  function progressBar() {
    return (correctChars * 98 / totalChars).toFixed(1);
  }

  function nextKey() {
    let ckey = taskString[0];
    if (isEng(ckey)) lang = "eng";
    if (isCyr(ckey)) lang = "ua";
    kbdSetup(false);
    const key = document.getElementById(getKeyId(ckey));
    if (key) key.classList.add("selected");
  }

  function getTimestamp() {
    return Math.floor(Date.now() / 1000);
  }

  // CustomAlert: –±–µ–∑ –∑–Ω–∏—â–µ–Ω–Ω—è DOM

  function CustomAlert() {
    this.alert = function (message, title = "") {
      // –í–∏–¥–∞–ª—è—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π, —è–∫—â–æ —ñ—Å–Ω—É—î
      const existingOverlay = document.getElementById('customAlertOverlay');
      if (existingOverlay) existingOverlay.remove();

      // –°—Ç–≤–æ—Ä—é—î–º–æ overlay
      const overlay = document.createElement('div');
      overlay.id = 'customAlertOverlay';
      overlay.style.cssText = `
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
      `;

      // –°—Ç–≤–æ—Ä—é—î–º–æ –≤—ñ–∫–Ω–æ
      const dialog = document.createElement('div');
      dialog.style.cssText = `
        background: white;
        padding: 20px;
        max-width: 90%;
        max-height: 80vh;
        overflow: auto;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        font-family: sans-serif;
      `;

      // –î–æ–¥–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫
      if (title) {
        const titleElem = document.createElement('div');
        titleElem.style.cssText = "font-weight: bold; font-size: 18px; margin-bottom: 10px;";
        titleElem.innerHTML = title;
        dialog.appendChild(titleElem);
      }

      // –î–æ–¥–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (HTML)
      const bodyElem = document.createElement('div');
      bodyElem.innerHTML = message;
      dialog.appendChild(bodyElem);

      // –ö–Ω–æ–ø–∫–∞ OK
      const footer = document.createElement('div');
      footer.style.cssText = "text-align: center; margin-top: 20px;";
      const okButton = document.createElement('button');
      okButton.textContent = "OK";
      okButton.style.cssText = `
        padding: 8px 16px;
        background-color: #2196F3;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      `;
      okButton.onclick = () => {
        overlay.remove();
        setupKeyHandlers(); // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª–∞–≤—ñ—à
      };
      footer.appendChild(okButton);
      dialog.appendChild(footer);

      // –í—Å—Ç–∞–≤–ª—è—î–º–æ –≤ DOM
      overlay.appendChild(dialog);
      document.body.appendChild(overlay);
    };
  }

  const customAlert = new CustomAlert();


  // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
  document.addEventListener('DOMContentLoaded', () => {
    startTyping(taskNum);
    setupKeyHandlers();
  });
</script>
</body>
</html>

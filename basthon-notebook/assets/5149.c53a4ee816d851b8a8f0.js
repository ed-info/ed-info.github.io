"use strict";(self.webpackChunk_basthon_basthon_notebook=self.webpackChunk_basthon_basthon_notebook||[]).push([[5149],{87867:(e,t,o)=>{o.d(t,{H:()=>i});var n=o(72467);class r extends Error{constructor(e){super(`Function ${e} not implemented!`),this.name="NotImplementedError"}}class s extends Event{constructor(e,t){super(e),this.detail=t}}class i{constructor(e){this._ready=!1,this._loaded=new n.I,this._execution_count=0,this._pendingInput=!1,this._rootPath=e.rootPath}version(){return"0.60.2"}language(){throw new r("language")}languageName(){throw new r("languageName")}moduleExts(){throw new r("moduleExts")}async launch(){throw new r("launch")}get execution_count(){return this._execution_count}evalAsync(e,t,o,n=null){throw new r("evalAsync")}restart(){throw new r("restart")}async putFile(e,t){throw new r("putFile")}async putModule(e,t){throw new r("putModule")}userModules(){return[]}getFile(e){throw new r("getFile")}getUserModuleFile(e){throw new r("getUserModuleFile")}more(e){throw new r("more")}complete(e){return[]}banner(){return`Welcome to the ${this.languageName()} REPL!`}ps1(){return">>> "}ps2(){return"... "}async init(){try{await this.launch()}catch(e){return void this._loaded.reject(e)}this.addEventListener("eval.request",this.evalFromEvent.bind(this)),this._ready=!0,this._loaded.resolve()}get ready(){return this._ready}async loaded(){await this._loaded.promise}basthonRoot(e=!1){let t=this._rootPath+"/"+this.version()+"/"+this.language();if(e&&!t.startsWith("http")){const e=window.location.origin+window.location.pathname;t=e.substring(0,e.lastIndexOf("/"))+"/"+t}return t}download(e,t){if(!("string"==typeof e||e instanceof String)){const t=new Blob([e],{type:"application/octet-stream"});e=window.URL.createObjectURL(t)}const o=document.createElement("a");o.download=t,o.href=e,o.target="_blank",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}static loadScript(e){return new Promise((function(t,o){let n=document.createElement("script");n.onload=t,n.onerror=o,n.src=e,document.head.appendChild(n)}))}dispatchEvent(e,t){document.dispatchEvent(new s(`basthon.${e}`,t))}addEventListener(e,t){document.addEventListener(`basthon.${e}`,(function(e){t(e.detail)}))}async inputAsync(e,t=!1,o){(o=this.clone(o)).content={prompt:e,password:t};const n=new Promise((function(e,t){o.resolve=e,o.reject=t}));this._pendingInput=!0,this.dispatchEvent("eval.input",o);const r=await n;return this._pendingInput=!1,r}clone(e){return JSON.parse(JSON.stringify(e))}async putRessource(e,t){var o;const n=null!==(o=e.split(".").pop())&&void 0!==o?o:"";return this.moduleExts().includes(n)?await this.putModule(e,t):await this.putFile(e,t)}pendingInput(){return this._pendingInput}async evalFromEvent(e){const t=t=>o=>{let n=this.clone(e);n.stream=t,n.content=o,this.dispatchEvent("eval.output",n)},o=t("stdout"),n=t("stderr");let r;try{r=await this.evalAsync(e.code,o,n,e)}catch(t){n(t.toString());const o=this.clone(e);return o.error=t,o.execution_count=this.execution_count,void this.dispatchEvent("eval.error",o)}if(null==r)return;const s=r[0],i=r[1];let a=this.clone(e);a.execution_count=i,null!=s&&(a.result=s),this.dispatchEvent("eval.finished",a)}}},5149:(e,t,o)=>{o.r(t),o.d(t,{KernelPython3:()=>r});var n=o(87867);class r extends n.H{constructor(e){var t;super(e),this._pyodideURLs=["https://cdn.jsdelivr.net/pyodide/v{PYODIDE_VERSION}/full/pyodide.js"],this.__kernel__=null,this.pythonVersion="",this._pyodideURLs.unshift(`${this.basthonRoot()}/pyodide/pyodide.js`),this._pyodideURLs=null!==(t=null==e?void 0:e.pyodideURLs)&&void 0!==t?t:this._pyodideURLs}basthonModulesRoot(e=!1){return this.basthonRoot(e)+"/modules"}language(){return"python3"}languageName(){return"Python 3"}moduleExts(){return["py"]}async _onload(){const e=window.pyodide,t=e._api.repodata_packages;for(let e of Object.keys(t)){const o=t[e];o.file_name=o.file_name.replace("{basthonRoot}",this.basthonRoot(!0))}this.pythonVersion=e.runPython("import platform ; platform.python_version()"),await e.loadPackage("basthon"),this.__kernel__=e.pyimport("basthon").__kernel__}async launch(){let e=this._pyodideURLs[0];for(let t of this._pyodideURLs){t=t.replace("{PYODIDE_VERSION}","0.22.1");try{if((await fetch(t,{method:"HEAD"})).ok){e=t;break}}catch(e){}}try{await r.loadScript(e)}catch(e){throw console.log(e),console.error("Can't load pyodide.js"),e}if(null==window.loadPyodide)throw console.log("window.loadPyodide is null!"),new Error("Can't load pyodide.js");try{window.pyodide=await window.loadPyodide({lockFileURL:this.basthonRoot()+"/repodata.json"})}catch(e){throw console.log(e),console.error("Can't load Python from Pyodide"),e}await this._onload()}get execution_count(){return this.__kernel__.execution_count()}async evalAsync(e,t,o,n=null){void 0===t&&(t=function(e){console.log(e)}),void 0===o&&(o=function(e){console.error(e)});const r=await this.__kernel__.eval(e,t,o,n);if(!window.pyodide.isPyProxy(r))throw r;const s=r.toJs({create_proxies:!1,dict_converter:Object.fromEntries});return r.destroy(),s}restart(){return this.__kernel__.restart()}async putFile(e,t){this.__kernel__.put_file(e,t)}async putModule(e,t){return await this.__kernel__.put_module(e,t)}userModules(){const e=this.__kernel__.user_modules();if(!window.pyodide.isPyProxy(e))return e;const t=e.toJs();return e.destroy(),t}getFile(e){return this.__kernel__.get_file(e)}getUserModuleFile(e){return this.__kernel__.get_user_module_file(e)}more(e){return this.__kernel__.more(e)}banner(){return'Python 3.10.2 (main, Jan 25 2023 18:32:53) on WebAssembly/Emscripten\nType "help", "copyright", "credits" or "license" for more information.'}complete(e){const t=this.__kernel__.complete(e);if(!window.pyodide.isPyProxy(t))return t;const o=t.toJs();return t.destroy(),o}chdir(e){window.pyodide._module.FS.chdir(e)}mkdir(e){window.pyodide._module.FS.mkdir(e)}}}}]);
//# sourceMappingURL=5149.c53a4ee816d851b8a8f0.js.map
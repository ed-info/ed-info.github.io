MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",(function(){var e=MathJax.ElementJax.mml,t=MathJax.OutputJax["HTML-CSS"],i=e.mo().With({HTMLspanElement:function(){return{bbox:{w:0},style:{}}}}),a={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],maxwidth:1.33,toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},n={linebreakstyle:"after"};e.mbase.Augment({HTMLlinebreakPenalty:a,HTMLmultiline:function(i){for(var s=this;s.inferred||s.parent&&"mrow"===s.parent.type&&s.isEmbellished();)s=s.parent;var l="math"===s.type&&"block"===s.Get("display")||"mtd"===s.type;s.isMultiline=!0;var h=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");h.linebreakstyle===e.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(h.linebreakstyle=this.Get("infixlinebreakstyle")),h.lineleading=t.length2em(h.lineleading,1,.5),this.HTMLremoveColor(i);var r=t.createStack(i);this.HTMLgetScale();for(var d={n:0,Y:0,scale:this.scale||1,isTop:l,values:{},VALUES:h},o=this.HTMLgetAlign(d,{}),L=this.HTMLgetShift(d,{},o),b=[],f={index:[],penalty:a.nobreak,w:0,W:L,shift:L,scanW:L,nest:0},c=!1;this.HTMLbetterBreak(f,d,!0)&&(f.scanW>=t.linebreakWidth||f.penalty===a.newline);)this.HTMLaddLine(r,b,f.index,d,f.values,c),b=f.index.slice(0),c=!0,o=this.HTMLgetAlign(d,f.values),L=this.HTMLgetShift(d,f.values,o),o===e.INDENTALIGN.CENTER&&(L=0),f.W=f.shift=f.scanW=L,f.penalty=a.nobreak;return d.isLast=!0,this.HTMLaddLine(r,b,[],d,n,c),"math"===s.type&&(r.style.width=i.bbox.width="100%"),this.HTMLhandleSpace(i),this.HTMLhandleColor(i),i.bbox.isMultiline=!0,i},HTMLbetterBreak:function(e,n,s){if(this.isToken)return!1;if(this.isEmbellished())return e.embellished=this,this.CoreMO().HTMLbetterBreak(e,n);if(this.linebreakContainer)return!1;var l,h,r,d=e.index.slice(0),o=e.index.shift(),L=this.data.length,b=e.index.length>0,f=!1;for(null==o&&(o=-1),b||(o++,e.W+=e.w,e.w=0),r=e.scanW=e.W,e.nest++;o<L&&(e.scanW<a.maxwidth*t.linebreakWidth||0===e.w);){if(this.data[o]){if(this.data[o].HTMLbetterBreak(e,n)&&(f=!0,d=[o].concat(e.index),l=e.W,h=e.w,e.penalty===a.newline))return e.index=d,e.nest&&e.nest--,!0;r=b?e.scanW:this.HTMLaddWidth(o,e,r)}e.index=[],o++,b=!1}return s&&f&&(i.parent=this.parent,i.inherit=this.inherit,i.HTMLbetterBreak(e,n)&&(f=!1,d=e.index)),e.nest&&e.nest--,e.index=d,f&&(e.W=l,e.w=h),f},HTMLaddWidth:function(e,i,a){if(this.data[e]){var n=this.data[e].HTMLspanElement();a+=n.bbox.w,n.style.paddingLeft&&(a+=t.unEm(n.style.paddingLeft)),n.style.paddingRight&&(a+=t.unEm(n.style.paddingRight)),i.W=i.scanW=a,i.w=0}return a},HTMLaddLine:function(e,i,a,n,s,l){line=t.createBox(e),line.bbox=this.HTMLemptyBBox({}),n.first=l,n.last=!0,this.HTMLmoveLine(i,a,line,n,s),this.HTMLcleanBBox(line.bbox);var h=this.HTMLgetAlign(n,s),r=this.HTMLgetShift(n,s,h);if(n.n>0){var d=t.FONTDATA.baselineskip*n.scale,o=(null==n.values.lineleading?n.VALUES:n.values).lineleading*n.scale;n.Y-=Math.max(d,n.d+line.bbox.h+o)}t.alignBox(line,h,n.Y,r),n.d=line.bbox.d,n.values=s,n.n++},HTMLgetAlign:function(t,i){var a,n=i,s=t.values,l=t.VALUES;return(a=0===t.n?n.indentalignfirst||s.indentalignfirst||l.indentalignfirst:t.isLast?s.indentalignlast||l.indentalignlast:s.indentalign||l.indentalign)===e.INDENTALIGN.INDENTALIGN&&(a=s.indentalign||l.indentalign),a===e.INDENTALIGN.AUTO&&(a=t.isTop?this.displayAlign:e.INDENTALIGN.LEFT),a},HTMLgetShift:function(i,a,n){var s,l=a,h=i.values,r=i.VALUES;if((s=0===i.n?l.indentshiftfirst||h.indentshiftfirst||r.indentshiftfirst:i.isLast?h.indentshiftlast||r.indentshiftlast:h.indentshift||r.indentshift)===e.INDENTSHIFT.INDENTSHIFT&&(s=h.indentshift||r.indentshift),"auto"!==s&&""!==s||(s="0"),s=t.length2em(s,1,t.cwidth),i.isTop&&"0"!==this.displayIndent){var d=t.length2em(this.displayIndent,1,t.cwidth);s+=n===e.INDENTALIGN.RIGHT?-d:d}return s},HTMLmoveLine:function(e,t,i,a,n){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.data.length-1),s===l&&e.length>1)this.data[s].HTMLmoveSlice(e.slice(1),t.slice(1),i,a,n,"paddingLeft");else{var h=a.last;for(a.last=!1;s<l;)this.data[s]&&(e.length<=1?this.data[s].HTMLmoveSpan(i,a,n):this.data[s].HTMLmoveSlice(e.slice(1),[],i,a,n,"paddingLeft")),s++,a.first=!1,e=[];a.last=h,this.data[s]&&(t.length<=1?this.data[s].HTMLmoveSpan(i,a,n):this.data[s].HTMLmoveSlice([],t.slice(1),i,a,n,"paddingRight"))}},HTMLmoveSlice:function(e,t,i,a,n,s){this.HTMLremoveColor();var l=this.HTMLcreateSliceSpan(i);if(this.HTMLmoveLine(e,t,l,a,n),l.style[s]="",this.HTMLcombineBBoxes(l,i.bbox),this.HTMLcleanBBox(l.bbox),0===t.length){var h=i=this.HTMLspanElement();this.href&&(i=i.parentNode),i.parentNode.removeChild(i),i.nextMathJaxSpan.id=h.id;for(var r=0;h=h.nextMathJaxSpan;){"a"===h.nodeName.toLowerCase()&&(h=h.firstChild);var d=this.HTMLhandleColor(h);d&&(d.id+="-MathJax-Continue-"+r,r++)}}return l},HTMLcreateSliceSpan:function(e){var t=this.HTMLspanElement(),i=0;this.href&&(t=t.parentNode);for(var a=t;a.nextMathJaxSpan;)a=a.nextMathJaxSpan,i++;var n=t.cloneNode(!1);return a.nextMathJaxSpan=n,n.nextMathJaxSpan=null,n.id+="-MathJax-Continue-"+i,n.bbox=this.HTMLemptyBBox({}),e.appendChild(n)},HTMLmoveSpan:function(i,a,n){if(!a.first&&!a.last||a.first&&a.values.linebreakstyle===e.LINEBREAKSTYLE.BEFORE||a.last&&n.linebreakstyle===e.LINEBREAKSTYLE.AFTER){var s=document.getElementById("MathJax-Color-"+this.spanID+t.idPostfix);s&&i.appendChild(s);var l=this.HTMLspanElement();this.href&&(l=l.parentNode),i.appendChild(l),a.last&&(l.style.paddingRight=""),(a.first||a.nextIsFirst)&&(l.style.paddingLeft="",s&&(this.HTMLremoveColor(l),this.HTMLhandleColor(l))),a.first&&0===l.bbox.w?a.nextIsFirst=!0:delete a.nextIsFirst,this.HTMLcombineBBoxes(this,i.bbox)}}}),e.mfenced.Augment({HTMLbetterBreak:function(e,i){var n,s,l,h=e.index.slice(0),r=e.index.shift(),d=this.data.length,o=e.index.length>0,L=!1;if(null==r&&(r=-1),o||(r++,e.W+=e.w,e.w=0),l=e.scanW=e.W,e.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),d&&this.dataI.push(0);for(var b=1;b<d;b++)this.data["sep"+b]&&this.dataI.push("sep"+b),this.dataI.push(b);this.data.close&&this.dataI.push("close")}for(d=this.dataI.length;r<d&&(e.scanW<a.maxwidth*t.linebreakWidth||0===e.w);){var f=this.dataI[r];if(this.data[f]){if(this.data[f].HTMLbetterBreak(e,i)&&(L=!0,h=[r].concat(e.index),n=e.W,s=e.w,e.penalty===a.newline))return e.index=h,e.nest&&e.nest--,!0;l=o?e.scanW:this.HTMLaddWidth(r,e,l)}e.index=[],r++,o=!1}return e.nest&&e.nest--,e.index=h,L&&(e.W=n,e.w=s),L},HTMLmoveLine:function(e,t,i,a,n){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.dataI.length-1),s===l&&e.length>1)this.data[this.dataI[s]].HTMLmoveSlice(e.slice(1),t.slice(1),i,a,n,"paddingLeft");else{var h=a.last;a.last=!1;for(var r=this.dataI[s];s<l;)this.data[r]&&(e.length<=1?this.data[r].HTMLmoveSpan(i,a,n):this.data[r].HTMLmoveSlice(e.slice(1),[],i,a,n,"paddingLeft")),s++,r=this.dataI[s],a.first=!1,e=[];a.last=h,this.data[r]&&(t.length<=1?this.data[r].HTMLmoveSpan(i,a,n):this.data[r].HTMLmoveSlice([],t.slice(1),i,a,n,"paddingRight"))}}}),e.msubsup.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var i,n,s,l=e.index.slice(0),h=e.index.shift(),r=e.index.length>0,d=!1;return r||(e.W+=e.w,e.w=0),s=e.scanW=e.W,null==h&&(this.HTMLbaseW=this.data[this.base].HTMLspanElement().bbox.w,this.HTMLdw=this.HTMLspanElement().bbox.w-this.HTMLbaseW),this.data[this.base].HTMLbetterBreak(e,t)&&(d=!0,l=[this.base].concat(e.index),i=e.W,n=e.w,e.penalty===a.newline&&(d=r=!0)),r||this.HTMLaddWidth(this.base,e,s),e.scanW+=this.HTMLdw,e.W=e.scanW,e.index=[],d&&(e.W=i,e.w=n,e.index=l),d},HTMLmoveLine:function(e,i,a,n,s){if(this.data[this.base]&&(e.length>1?this.data[this.base].HTMLmoveSlice(e.slice(1),i.slice(1),a,n,s,"paddingLeft"):i.length<=1?this.data[this.base].HTMLmoveSpan(a,n,s):this.data[this.base].HTMLmoveSlice([],i.slice(1),a,n,s,"paddingRight")),0===i.length){var l=this.data[this.sup]||this.data[this.sub];if(l&&this.HTMLnotEmpty(l)){var h=l.HTMLspanElement().parentNode;l.href&&(h=h.parentNode);var r=h.parentNode;if(this.data[this.base]){var d=this.data[this.base].HTMLspanElement().bbox.ic;d&&(r.style.marginLeft=t.Em(-d)),r.removeChild(r.firstChild)}for(h=r.firstChild;h;h=h.nextSibling)h.style.left=t.Em(t.unEm(h.style.left)-this.HTMLbaseW);r.bbox.w-=this.HTMLbaseW,r.style.width=t.Em(r.bbox.w),this.HTMLcombineBBoxes(r,a.bbox),a.appendChild(r)}}}}),e.mmultiscripts.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var i=e.index.slice(0);e.index.shift();var n,s,l,h=e.index.length>0,r=!1;h||(e.W+=e.w,e.w=0),e.scanW=e.W;var d=this.HTMLspanElement().bbox,o=this.data[this.base].HTMLspanElement().bbox,L=d.w-o.w;return e.scanW+=d.dx,l=e.scanW,this.data[this.base].HTMLbetterBreak(e,t)&&(r=!0,i=[this.base].concat(e.index),n=e.W,s=e.w,e.penalty===a.newline&&(r=h=!0)),h||this.HTMLaddWidth(this.base,e,l),e.scanW+=L,e.W=e.scanW,e.index=[],r&&(e.W=n,e.w=s,e.index=i),r},HTMLmoveLine:function(e,i,a,n,s){var l=this.HTMLspanElement(),h=l.bbox,r=l.firstChild,d={};t.msiePaddingWidthBug&&(r=r.nextSibling);for(var o=r.firstChild;o;)o.bbox&&o.bbox.name&&(d[o.bbox.name]=o),o=o.nextSibling;if(e.length<1&&(d.presub||d.presup)){var L=t.createStack(a);d.presup&&(t.addBox(L,d.presup),t.placeBox(d.presup,h.dx-d.presup.bbox.w,h.u)),d.presub&&(t.addBox(L,d.presub),t.placeBox(d.presub,h.dx+h.delta-d.presub.bbox.w,-h.v)),this.HTMLcombineBBoxes(L,a.bbox),a.appendChild(L),L.style.width=t.Em(h.dx)}if(this.data[this.base]&&(e.length>1?this.data[this.base].HTMLmoveSlice(e.slice(1),i.slice(1),a,n,s,"paddingLeft"):i.length<=1?this.data[this.base].HTMLmoveSpan(a,n,s):this.data[this.base].HTMLmoveSlice([],i.slice(1),a,n,s,"paddingRight")),0===i.length){for(this.data[this.base]&&r.removeChild(r.firstChild),o=r.firstChild;o;o=o.nextSibling)o.style.left=t.Em(t.unEm(o.style.left)-h.px);r.bbox.w-=h.px,r.style.width=t.Em(r.bbox.w),this.HTMLcombineBBoxes(r,a.bbox),a.appendChild(r)}}}),e.mo.Augment({HTMLbetterBreak:function(i,n){if(i.values&&i.values.id===this.spanID)return!1;var s=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");s.linebreakstyle===e.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(s.linebreakstyle=this.Get("infixlinebreakstyle")),s.texClass===e.TEXCLASS.OPEN&&i.nest++,s.texClass===e.TEXCLASS.CLOSE&&i.nest&&i.nest--;var l=i.scanW,h=i.embellished||this;delete i.embellished;var r=h.HTMLspanElement(),d=r.bbox.w;if(r.style.paddingLeft&&(d+=t.unEm(r.style.paddingLeft)),s.linebreakstyle===e.LINEBREAKSTYLE.AFTER&&(l+=d,d=0),l-i.shift==0&&s.linebreak!==e.LINEBREAK.NEWLINE)return!1;var o=t.linebreakWidth-l;if(0===n.n&&(s.indentshiftfirst!==n.VALUES.indentshiftfirst||s.indentalignfirst!==n.VALUES.indentalignfirst)){var L=this.HTMLgetAlign(n,s),b=this.HTMLgetShift(n,s,L);o+=i.shift-b}var f=Math.floor(o/t.linebreakWidth*1e3);f<0&&(f=a.toobig-3*f),s.fence&&(f+=a.fence),(s.linebreakstyle===e.LINEBREAKSTYLE.AFTER&&s.texClass===e.TEXCLASS.OPEN||s.texClass===e.TEXCLASS.CLOSE)&&(f+=a.close),f+=i.nest*a.nestfactor;var c=a[s.linebreak||e.LINEBREAK.AUTO]||0;return MathJax.Object.isArray(c)?f=Math.max(1,f+c[0]*i.nest):(c||o>=0)&&(f=c*i.nest),!(f>=i.penalty||(i.penalty=f,i.values=s,i.W=l,i.w=d,s.lineleading=t.length2em(s.lineleading,1,n.VALUES.lineleading),s.id=this.spanID,0))}}),e.mspace.Augment({HTMLbetterBreak:function(i,n){if(i.values&&i.values.id===this.spanID)return!1;var s=this.getValues("linebreak"),l=s.linebreak;l&&!this.hasDimAttr()||(l=e.LINEBREAK.AUTO);var h=i.scanW,r=this.HTMLspanElement(),d=r.bbox.w;if(r.style.paddingLeft&&(d+=t.unEm(r.style.paddingLeft)),h-i.shift==0)return!1;var o=t.linebreakWidth-h,L=Math.floor(o/t.linebreakWidth*1e3);L<0&&(L=a.toobig-3*L),L+=i.nest*a.nestfactor;var b=a[l]||0;return l===e.LINEBREAK.AUTO&&d>=a.spacelimit&&!this.mathbackground&&!this.background&&(b=[(d+a.spaceoffset)*a.spacefactor]),MathJax.Object.isArray(b)?L=Math.max(1,L+b[0]*i.nest):(b||o>=0)&&(L=b*i.nest),!(L>=i.penalty||(i.penalty=L,i.values=s,i.W=h,i.w=d,s.lineleading=n.VALUES.lineleading,s.linebreakstyle="before",s.id=this.spanID,0))}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",(function(){e.TeXmathchoice.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,a,n){return this.Core().HTMLmoveSlice(e,t,i,a,n)}})})),e.maction.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,a,n){return this.Core().HTMLmoveSlice(e,t,i,a,n)},HTMLmoveSlice:function(e,i,a,n,s,l){var h=document.getElementById("MathJax-HitBox-"+this.spanID+t.idPostfix);h&&h.parentNode.removeChild(h);var r=this.SUPER(arguments).HTMLmoveSlice.apply(this,arguments);if(0===i.length){a=this.HTMLspanElement();for(var d=0;a;)h=this.HTMLhandleHitBox(a,"-Continue-"+d),a=a.nextMathJaxSpan,d++}return r}}),e.semantics.Augment({HTMLbetterBreak:function(e,t){return!!this.data[0]&&this.data[0].HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,a,n){return this.data[0]?this.data[0].HTMLmoveSlice(e,t,i,a,n):null}}),MathJax.Hub.Startup.signal.Post("HTML-CSS multiline Ready"),MathJax.Ajax.loadComplete(t.autoloadDir+"/multiline.js")}));
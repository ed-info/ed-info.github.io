MathJax.Hub.Register.StartupHook("SVG Jax Ready",(function(){var t=MathJax.ElementJax.mml,e=MathJax.OutputJax.SVG,i=e.BBOX,a=t.mo().With({SVGdata:{w:0,x:0}}),n={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],maxwidth:1.33,toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},s={linebreakstyle:"after"};t.mrow.Augment({SVGmultiline:function(i){for(var a=this;a.inferred||a.parent&&"mrow"===a.parent.type&&a.isEmbellished();)a=a.parent;var l="math"===a.type&&"block"===a.Get("display")||"mtd"===a.type;a.isMultiline=!0;var h=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");h.linebreakstyle===t.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(h.linebreakstyle=this.Get("infixlinebreakstyle")),h.lineleading=e.length2em(h.lineleading,1,.5),i=this.SVG(),"math"===a.type&&(e.linebreakWidth<e.BIGDIMEN?i.w=e.linebreakWidth:i.w=e.cwidth);for(var d={n:0,Y:0,scale:this.scale||1,isTop:l,values:{},VALUES:h},r=this.SVGgetAlign(d,{}),S=this.SVGgetShift(d,{},r),o=[],c={index:[],penalty:n.nobreak,w:0,W:S,shift:S,scanW:S,nest:0},f=!1;this.SVGbetterBreak(c,d,!0)&&(c.scanW>=e.linebreakWidth||c.penalty===n.newline);)this.SVGaddLine(i,o,c.index,d,c.values,f),o=c.index.slice(0),f=!0,r=this.SVGgetAlign(d,c.values),S=this.SVGgetShift(d,c.values,r),r===t.INDENTALIGN.CENTER&&(S=0),c.W=c.shift=c.scanW=S,c.penalty=n.nobreak;return d.isLast=!0,this.SVGaddLine(i,o,[],d,s,f),this.SVGhandleSpace(i),this.SVGhandleColor(i),i.isMultiline=!0,this.SVGsaveData(i),i}}),t.mbase.Augment({SVGlinebreakPenalty:n,SVGbetterBreak:function(t,i,s){if(this.isToken)return!1;if(this.isEmbellished())return t.embellished=this,this.CoreMO().SVGbetterBreak(t,i);if(this.linebreakContainer)return!1;var l,h,d=t.index.slice(0),r=t.index.shift(),S=this.data.length,o=t.index.length>0,c=!1;for(null==r&&(r=-1),o||(r++,t.W+=t.w,t.w=0),h=t.scanW=t.W,t.nest++;r<S&&(t.scanW<n.maxwidth*e.linebreakWidth||0===t.w);){if(this.data[r]){if(this.data[r].SVGbetterBreak(t,i)&&(c=!0,d=[r].concat(t.index),l=t.W,t.w,t.penalty===n.newline))return t.index=d,t.nest&&t.nest--,!0;h=o?t.scanW:this.SVGaddWidth(r,t,h)}t.index=[],r++,o=!1}return s&&c&&(a.parent=this.parent,a.inherit=this.inherit,a.SVGbetterBreak(t,i)&&(c=!1,d=t.index)),t.nest&&t.nest--,t.index=d,c&&(t.W=l),c},SVGaddWidth:function(t,e,i){if(this.data[t]){var a=this.data[t].SVGdata;i+=a.w+a.x,a.X&&(i+=a.X),e.W=e.scanW=i,e.w=0}return i},SVGaddLine:function(t,a,n,s,l,h){var d=i();s.first=h,s.last=!0,this.SVGmoveLine(a,n,d,s,l),d.Clean();var r=this.SVGgetAlign(s,l),S=this.SVGgetShift(s,l,r);if(s.n>0){var o=e.FONTDATA.baselineskip*s.scale,c=(null==s.values.lineleading?s.VALUES:s.values).lineleading*s.scale;s.Y-=Math.max(o,s.d+d.h+c)}d.w+S>t.w&&(t.w=d.w+S),t.Align(d,r,0,s.Y,S),s.d=d.d,s.values=l,s.n++},SVGgetAlign:function(e,i){var a,n=i,s=e.values,l=e.VALUES;return(a=0===e.n?n.indentalignfirst||s.indentalignfirst||l.indentalignfirst:e.isLast?s.indentalignlast||l.indentalignlast:s.indentalign||l.indentalign)===t.INDENTALIGN.INDENTALIGN&&(a=s.indentalign||l.indentalign),a===t.INDENTALIGN.AUTO&&(a=e.isTop?this.displayAlign:t.INDENTALIGN.LEFT),a},SVGgetShift:function(i,a,n){var s,l=a,h=i.values,d=i.VALUES;if((s=0===i.n?l.indentshiftfirst||h.indentshiftfirst||d.indentshiftfirst:i.isLast?h.indentshiftlast||d.indentshiftlast:h.indentshift||d.indentshift)===t.INDENTSHIFT.INDENTSHIFT&&(s=h.indentshift||d.indentshift),"auto"!==s&&""!==s||(s="0"),s=e.length2em(s,1,e.cwidth),i.isTop&&"0"!==this.displayIndent){var r=e.length2em(this.displayIndent,1,e.cwidth);s+=n===t.INDENTALIGN.RIGHT?-r:r}return s},SVGmoveLine:function(t,e,i,a,n){var s=t[0],l=e[0];if(null==s&&(s=-1),null==l&&(l=this.data.length-1),s===l&&t.length>1)this.data[s].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft");else{var h=a.last;for(a.last=!1;s<l;)this.data[s]&&(t.length<=1?this.data[s].SVGmove(i,a,n):this.data[s].SVGmoveSlice(t.slice(1),[],i,a,n,"paddingLeft")),s++,a.first=!1,t=[];a.last=h,this.data[s]&&(e.length<=1?this.data[s].SVGmove(i,a,n):this.data[s].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight"))}},SVGmoveSlice:function(t,e,a,n,s,l){var h=i();return this.SVGmoveLine(t,e,h,n,s),h.Clean(),this.href&&this.SVGaddHref(h),this.SVGhandleColor(h),0==t.length&&this.SVGhandleSpace(h),a.Add(h,a.w,0,!0),h},SVGmove:function(e,i,a){if(!i.first&&!i.last||i.first&&i.values.linebreakstyle===t.LINEBREAKSTYLE.BEFORE||i.last&&a.linebreakstyle===t.LINEBREAKSTYLE.AFTER){var n=this.toSVG(this.SVGdata.HW,this.SVGdata.D);(i.first||i.nextIsFirst)&&(n.x=0),i.last&&n.X&&(n.X=0),e.Add(n,e.w,0,!0)}i.first&&n&&0===n.w?i.nextIsFirst=!0:delete i.nextIsFirst}}),t.mfenced.Augment({SVGbetterBreak:function(t,i){var a,s,l,h=t.index.slice(0),d=t.index.shift(),r=this.data.length,S=t.index.length>0,o=!1;if(null==d&&(d=-1),S||(d++,t.W+=t.w,t.w=0),l=t.scanW=t.W,t.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),r&&this.dataI.push(0);for(var c=1;c<r;c++)this.data["sep"+c]&&this.dataI.push("sep"+c),this.dataI.push(c);this.data.close&&this.dataI.push("close")}for(r=this.dataI.length;d<r&&(t.scanW<n.maxwidth*e.linebreakWidth||0===t.w);){var f=this.dataI[d];if(this.data[f]){if(this.data[f].SVGbetterBreak(t,i)&&(o=!0,h=[d].concat(t.index),a=t.W,s=t.w,t.penalty===n.newline))return t.index=h,t.nest&&t.nest--,!0;l=S?t.scanW:this.SVGaddWidth(d,t,l)}t.index=[],d++,S=!1}return t.nest&&t.nest--,t.index=h,o&&(t.W=a,t.w=s),o},SVGmoveLine:function(t,e,i,a,n){var s=t[0],l=e[0];if(null==s&&(s=-1),null==l&&(l=this.dataI.length-1),s===l&&t.length>1)this.data[this.dataI[s]].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft");else{var h=a.last;a.last=!1;for(var d=this.dataI[s];s<l;)this.data[d]&&(t.length<=1?this.data[d].SVGmove(i,a,n):this.data[d].SVGmoveSlice(t.slice(1),[],i,a,n,"paddingLeft")),s++,d=this.dataI[s],a.first=!1,t=[];a.last=h,this.data[d]&&(e.length<=1?this.data[d].SVGmove(i,a,n):this.data[d].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight"))}}}),t.msubsup.Augment({SVGbetterBreak:function(t,e){if(!this.data[this.base])return!1;var i,a,s,l=t.index.slice(0),h=t.index.shift(),d=t.index.length>0,r=!1;return d||(t.W+=t.w,t.w=0),s=t.scanW=t.W,null==h&&(this.SVGdata.dw=this.SVGdata.w-this.data[this.base].SVGdata.w),this.data[this.base].SVGbetterBreak(t,e)&&(r=!0,l=[this.base].concat(t.index),i=t.W,a=t.w,t.penalty===n.newline&&(r=d=!0)),d||this.SVGaddWidth(this.base,t,s),t.scanW+=this.SVGdata.dw,t.W=t.scanW,t.index=[],r&&(t.W=i,t.w=a,t.index=l),r},SVGmoveLine:function(t,e,i,a,n){if(this.data[this.base]&&(t.length>1?this.data[this.base].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft"):e.length<=1?this.data[this.base].SVGmove(i,a,n):this.data[this.base].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight")),0===e.length){var s,l=this.data[this.sup],h=this.data[this.sub],d=i.w,r=(this.data[this.base].SVGdata||{}).ic||0;l&&(s=l.SVGdata||{},i.Add(l.toSVG(),d+(s.dx||0)-r,s.dy)),h&&(s=h.SVGdata||{},i.Add(h.toSVG(),d+(s.dx||0)-r,s.dy))}}}),t.mmultiscripts.Augment({SVGbetterBreak:function(t,e){if(!this.data[this.base])return!1;var i=t.index.slice(0);t.index.shift();var a,s,l,h=t.index.length>0,d=!1;h||(t.W+=t.w,t.w=0),t.scanW=t.W;var r=this.SVGdata.w-this.data[this.base].SVGdata.w-this.SVGdata.dx;return t.scanW+=this.SVGdata.dx,l=t.scanW,this.data[this.base].SVGbetterBreak(t,e)&&(d=!0,i=[this.base].concat(t.index),a=t.W,s=t.w,t.penalty===n.newline&&(d=h=!0)),h||this.SVGaddWidth(this.base,t,l),t.scanW+=r,t.W=t.scanW,t.index=[],d&&(t.W=a,t.w=s,t.index=i),d},SVGmoveLine:function(t,e,i,a,n){var s,l=this.SVGdata;if(t.length<1){this.scriptBox=this.SVGgetScripts(this.SVGdata.s);var h=this.scriptBox[2],d=this.scriptBox[3];s=i.w+l.dx,d&&i.Add(d,s+l.delta-d.w,l.u),h&&i.Add(h,s-h.w,-l.v)}if(this.data[this.base]&&(t.length>1?this.data[this.base].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft"):e.length<=1?this.data[this.base].SVGmove(i,a,n):this.data[this.base].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight")),0===e.length){var r=this.scriptBox[0],S=this.scriptBox[1];s=i.w+l.s,S&&i.Add(S,s,l.u),r&&i.Add(r,s-l.delta,-l.v),delete this.scriptBox}}}),t.mo.Augment({SVGbetterBreak:function(i,a){if(i.values&&i.values.last===this)return!1;var s=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");s.linebreakstyle===t.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(s.linebreakstyle=this.Get("infixlinebreakstyle")),s.texClass===t.TEXCLASS.OPEN&&i.nest++,s.texClass===t.TEXCLASS.CLOSE&&i.nest&&i.nest--;var l=i.scanW,h=i.embellished;delete i.embellished,h&&h.SVGdata||(h=this);var d=h.SVGdata,r=d.w+d.x;if(s.linebreakstyle===t.LINEBREAKSTYLE.AFTER&&(l+=r,r=0),l-i.shift==0&&s.linebreak!==t.LINEBREAK.NEWLINE)return!1;var S=e.linebreakWidth-l;if(0===a.n&&(s.indentshiftfirst!==a.VALUES.indentshiftfirst||s.indentalignfirst!==a.VALUES.indentalignfirst)){var o=this.SVGgetAlign(a,s),c=this.SVGgetShift(a,s,o);S+=i.shift-c}var f=Math.floor(S/e.linebreakWidth*1e3);f<0&&(f=n.toobig-3*f),s.fence&&(f+=n.fence),(s.linebreakstyle===t.LINEBREAKSTYLE.AFTER&&s.texClass===t.TEXCLASS.OPEN||s.texClass===t.TEXCLASS.CLOSE)&&(f+=n.close),f+=i.nest*n.nestfactor;var u=n[s.linebreak||t.LINEBREAK.AUTO]||0;return MathJax.Object.isArray(u)?f=Math.max(1,f+u[0]*i.nest):(u||S>=0)&&(f=u*i.nest),!(f>=i.penalty||(i.penalty=f,i.values=s,i.W=l,i.w=r,s.lineleading=e.length2em(s.lineleading,1,a.VALUES.lineleading),s.last=this,0))}}),t.mspace.Augment({SVGbetterBreak:function(i,a){if(i.values&&i.values.last===this)return!1;var s=this.getValues("linebreak"),l=s.linebreak;l&&!this.hasDimAttr()||(l=t.LINEBREAK.AUTO);var h=i.scanW,d=this.SVGdata,r=d.w+d.x;if(h-i.shift==0)return!1;var S=e.linebreakWidth-h,o=Math.floor(S/e.linebreakWidth*1e3);o<0&&(o=n.toobig-3*o),o+=i.nest*n.nestfactor;var c=n[l]||0;return l===t.LINEBREAK.AUTO&&r>=1e3*n.spacelimit&&!this.mathbackground&&!this.backrgound&&(c=[(r/1e3+n.spaceoffset)*n.spacefactor]),MathJax.Object.isArray(c)?o=Math.max(1,o+c[0]*i.nest):(c||S>=0)&&(o=c*i.nest),!(o>=i.penalty||(i.penalty=o,i.values=s,i.W=h,i.w=r,s.lineleading=a.VALUES.lineleading,s.linebreakstyle="before",s.last=this,0))}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",(function(){t.TeXmathchoice.Augment({SVGbetterBreak:function(t,e){return this.Core().SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.Core().SVGmoveSlice(t,e,i,a,n)}})})),t.maction.Augment({SVGbetterBreak:function(t,e){return this.Core().SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.Core().SVGmoveSlice(t,e,i,a,n)}}),t.semantics.Augment({SVGbetterBreak:function(t,e){return!!this.data[0]&&this.data[0].SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.data[0]?this.data[0].SVGmoveSlice(t,e,i,a,n):null}}),MathJax.Hub.Startup.signal.Post("SVG multiline Ready"),MathJax.Ajax.loadComplete(e.autoloadDir+"/multiline.js")}));
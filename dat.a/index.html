<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8">
  <title>dat.A: the power of data</title>
  <link rel="stylesheet" href="styles.css">
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js">
</script>
<script src="lib.js">
</script>

<body>
  <div class="menu-bar">
    <div class="menu-item">–§–∞–π–ª <div class="dropdown">
        <a href="#" onclick="createDbFile()">üöÄ –ù–æ–≤–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö</a>
        <a href="#" onclick="showStorageDialog()">üíº –°—Ö–æ–≤–∏—â–µ –±–∞–∑ –¥–∞–Ω–∏—Ö</a>
        <a href="#" onclick="exportDTA()">üì¶ –ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫ .DTA</a>
        <a href="#" onclick="document.getElementById('dtaFileInput').click()">üìÇ –í—ñ–¥–∫—Ä–∏—Ç–∏ –∑ .DTA</a>
        <input type="file" id="dtaFileInput" style="display:none;" accept=".dta" onchange="importDTA(this.files[0])">
        <a href="#" onclick="document.getElementById('sqliteFileInput').click()">üì• –Ü–º–ø–æ—Ä—Ç –∑ sqlite DB</a>
        <input type="file" id="sqliteFileInput" accept=".db,.sqlite" style="display:none;" onchange="importSQLiteDb(this.files[0])">
        <a href="#" onclick="exportSQLiteDb()">üì§ –ï–∫—Å–ø–æ—Ä—Ç –≤ sqlite DB</a>
        <a href="#" onclick="showCsvImportDialog()">üìë –Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –∑ CSV</a>
        <input type="file" id="csvFileInput" accept=".csv" style="display:none;" onchange="handleCsvFile(this.files[0])">
        <a href="#" onclick="showDatabaseInfo()">‚ÑπÔ∏è –í—ñ–¥–æ–º–æ—Å—Ç—ñ</a>
        <a href="#" onclick="closeDatabase()">‚ùå –ó–∞–∫—Ä–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö</a>
        <a href="#" onclick="exitApplication()">üö™ –í–∏—Ö—ñ–¥</a>
      </div>
    </div>
    <div class="menu-item">–°—Ç–≤–æ—Ä–∏—Ç–∏ <div class="dropdown">
        <a href="#" onclick="createDbFile()">üöÄ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö</a>
        <a href="#" onclick="createTable()">üìÑ –¢–∞–±–ª–∏—Ü—è</a>
        <a href="#" onclick="createQuery()">üîç –ó–∞–ø–∏—Ç</a>
        <a href="#" onclick="createReport()">üìù –ó–≤—ñ—Ç</a>
        <a href="#" onclick="createForm()">üìë –§–æ—Ä–º–∞</a>
        <a href="#" onclick="createOwnSQL()">‚úçÔ∏è SQL-–∑–∞–ø–∏—Ç</a>
      </div>
    </div>
    <div class="menu-item">–î–∞–Ω—ñ <div class="dropdown" id="data-menu">
      </div>
    </div>
    <div class="menu-item">–¢–∞–±–ª–∏—Ü—ñ <div class="dropdown">
        <a href="#" onclick="createTable()">ùÑú –°—Ç–≤–æ—Ä–∏—Ç–∏</a>
        <a href="#" onclick="showSavedTablesDialog()">üìö –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ</a>
      </div>
    </div>
    <div class="menu-item">–ó–∞–ø–∏—Ç–∏ <div class="dropdown">
        <a href="#" onclick="createQuery()">üîç –°—Ç–≤–æ—Ä–∏—Ç–∏</a>
        <a href="#" onclick="showSavedQueriesDialog()">üìö –°—Ç–≤–æ—Ä–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏</a>
      </div>
    </div>
    <div class="menu-item">
      <span>–ó–≤—ñ—Ç–∏</span>
      <div class="dropdown">
        <a href="#" onclick="createReport()">üìù –°—Ç–≤–æ—Ä–∏—Ç–∏</a>
        <a href="#" onclick="showReportsList()">üìö –°—Ç–≤–æ—Ä–µ–Ω—ñ –∑–≤—ñ—Ç–∏</a>
      </div>
    </div>
    <div class="menu-item">–§–æ—Ä–º–∏ <div class="dropdown">
        <a href="#" onclick="createForm()">üìë –°—Ç–≤–æ—Ä–∏—Ç–∏</a>
        <a href="#" onclick="showSavedFormsDialog()">üìö –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–æ—Ä–º–∏</a>
      </div>
    </div>
    <div class="menu-item">–î–æ–ø–æ–º–æ–≥–∞ <div class="dropdown">
        <a href="help.html" target="_blank">‚ùì –ü—ñ–¥–∫–∞–∑–∫–∞</a>
        <a href="#" onclick="showAboutModal()">üòâ –ü—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É</a> 
      </div>
    </div>
  </div>
  <div class="title-bar" id="mainTitle"> –û–±–µ—Ä—ñ—Ç—å –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö </div>
  <div style="padding: 20px;">
    <p>–í—ñ—Ç–∞—î–º–æ —É –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É dat.A!</p>
    <p>–û–±–µ—Ä—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É –∑ –º–µ–Ω—é –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏.</p>
  </div>
  <div class="center-image">
    <img src="logo.png" alt="logo">
  </div>
  <div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:800px; border-radius:10px;">
      <h2 id="makeTable">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ</h2>
      <label for="tableName">–ù–∞–∑–≤–∞ —Ç–∞–±–ª–∏—Ü—ñ:</label>
      <input type="text" id="tableName" value="–ù–µ–Ω–∞–∑–≤–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü—è" style="width:100%; padding:8px; margin-bottom:15px; font-size:16px;">
      <table id="schemaTable" border="1" cellpadding="5" style="width:100%; border-collapse:collapse;">
        <thead>
          <tr>
            <th style="width:5%;">ID</th>
            <th>–ù–∞–∑–≤–∞ –ø–æ–ª—è</th>
            <th>–¢–∏–ø –¥–∞–Ω–∏—Ö</th>
            <th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
          </tr>
        </thead>
        <tbody id="schemaBody">
        </tbody>
      </table>
      <br>
      <button onclick="addSchemaRow()">–î–æ–¥–∞—Ç–∏ –ø–æ–ª–µ</button>
      <button onclick="saveSchema()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
      <button onclick="closeModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </div>
  <div id="dbModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:500px; border-radius:10px;">
      <h2>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö</h2>
      <label for="dbName">–Ü–º‚Äô—è —Ñ–∞–π–ª—É (–±–µ–∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è):</label>
      <input type="text" id="dbName" value="my_database" style="width:100%; padding:8px; margin-bottom:20px; font-size:16px;">
      <div style="display:flex; gap:10px; justify-content:flex-end;">
        <button onclick="saveDb()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button onclick="saveDbAndCreateTable()">–ó–±–µ—Ä–µ–≥—Ç–∏ —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é</button>
        <button onclick="closeDbModal()">–í–∏–π—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="editModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:90%; max-width:1000px; border-radius:10px;">
      <h2 id="editTitle">–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ</h2>
      <div style="overflow-x:auto; max-height:500px; overflow-y:auto;">
        <table id="editTable" border="1" cellpadding="5" style="width:100%; border-collapse:collapse; table-layout:fixed;">
          <thead id="editHead" style="background-color:#eee;">
          </thead>
          <tbody id="editBody">
          </tbody>
        </table>
      </div>
      <br>
      <button id="addDataRowBtn" onclick="addDataRow()">+ –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫</button>
      <button id="deleteSelectedRowBtn" onclick="deleteSelectedRow()">üóë –í–∏–¥–∞–ª–∏—Ç–∏ —Ä—è–¥–æ–∫</button>
      <button id="saveTableDataBtn" onclick="saveTableData()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
      <button onclick="closeEditModal()">‚ùå –ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
  </div>
  <div id="messageModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:10000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; box-shadow: 0 0 10px #000;">
      <h3>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h3>
      <div id="messageContent" style="margin: 15px 0; white-space: pre-wrap; word-wrap: break-word;">
      </div>
      <div style="text-align:right;">
        <button onclick="closeMessage()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="storageModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; max-height:80%; overflow-y:auto;">
      <h3>–°—Ö–æ–≤–∏—â–µ –±–∞–∑ –¥–∞–Ω–∏—Ö</h3>
      <ul id="storageList" style="list-style:none; padding:0;">
      </ul>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="loadSelectedDb()">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
        <button onclick="closeStorageDialog()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button onclick="confirmDeleteDb()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="deleteModal" class="modal" style="display: none; z-index: 1000;">
    <div class="modal-content">
      <p id="deleteConfirmText">–í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ñ–∞–π–ª?</p>
      <div style="margin-top: 1em; text-align: right;">
        <button onclick="doDeleteDb()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeDeleteModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="queryModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:90%; max-width:1000px; border-radius:10px;">
      <h2>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É</h2>
      <label for="queryName">–ù–∞–∑–≤–∞ –∑–∞–ø–∏—Ç—É:</label>
      <input type="text" id="queryName" value="–ù–æ–≤–∏–π –∑–∞–ø–∏—Ç" style="width:100%; padding:8px; margin-bottom:15px; font-size:16px;">
      <table class="query-table" border="1" cellpadding="5" style="width:100%; border-collapse:collapse;">
        <thead>
          <tr>
            <th>–¢–∞–±–ª–∏—Ü—è</th>
            <th>–ü–æ–ª–µ</th>
            <th>–í–∏–¥–∏–º–µ</th>
            <th>–£–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è</th>
            <th>–ö—Ä–∏—Ç–µ—Ä—ñ–π</th>
            <th>
            </th>
          </tr>
        </thead>
        <tbody id="queryBody">
        </tbody>
      </table>
      <!-- –ö–Ω–æ–ø–∫–∞ "–î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫" -->
      <div style="text-align: right; margin-top: 10px;">
        <button onclick="addQueryRow()">–î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫</button>
      </div>
      <!-- –¢–∞–±–ª–∏—Ü—è –∑–≤'—è–∑–∫—ñ–≤ -->
      <table id="joinBody" class="query-table" style="width: 100%; margin-top: 10px; display: none;">
        <thead>
          <tr>
            <th>–¢–∞–±–ª–∏—Ü—è A</th>
            <th>–ü–æ–ª–µ A</th>
            <th>–¢–∞–±–ª–∏—Ü—è B</th>
            <th>–ü–æ–ª–µ B</th>
            <th>
            </th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
      <!-- –ö–Ω–æ–ø–∫–∞ "–î–æ–¥–∞—Ç–∏ –∑–≤'—è–∑–æ–∫" -->
      <div style="text-align: right; margin-top: 5px;">
        <button onclick="addJoinRow()">–î–æ–¥–∞—Ç–∏ –∑–≤'—è–∑–æ–∫</button>
      </div>
      <!-- –ö–Ω–æ–ø–∫–∏ –ó–±–µ—Ä–µ–≥—Ç–∏ / –°–∫–∞—Å—É–≤–∞—Ç–∏ -->
      <div style="display: flex; justify-content: space-between; margin-top: 10px;">
        <button onclick="openRelationFromQuery()">–í—ñ–∑—É–∞–ª—å–Ω–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–≤'—è–∑–∫—ñ–≤</button>
        <div>
          <button onclick="generateSqlQuery()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
          <button onclick="closeQueryModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
      </div>
    </div>
  </div>
  <div id="sqlModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:10000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:600px; border-radius:10px; box-shadow: 0 0 10px #000;">
      <h3>–ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π SQL –∑–∞–ø–∏—Ç</h3>
      <pre id="generatedSql" style="background:#eee; padding:10px; border-radius:5px; white-space: pre-wrap; word-wrap: break-word;">
</pre>
      <div style="text-align:right;">
        <button onclick="executeSqlQuery()">–í–∏–∫–æ–Ω–∞—Ç–∏</button>
        <button onclick="closeSqlModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="savedQueriesModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; max-height:80%; overflow-y:auto;">
      <h3>–°—Ç–≤–æ—Ä–µ–Ω—ñ –∑–∞–ø–∏—Ç–∏</h3>
      <ul id="savedQueriesList" style="list-style:none; padding:0;">
      </ul>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="executeSelectedQuery()">–í–∏–∫–æ–Ω–∞—Ç–∏</button>  
        <button onclick="editSelectedQuery()">–ó–º—ñ–Ω–∏—Ç–∏</button>
        <button onclick="deleteSelectedQuery()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeSavedQueriesDialog()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="savedTablesModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; max-height:80%; overflow-y:auto;">
      <h3>–°—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ</h3>
      <ul id="savedTablesList" style="list-style:none; padding:0;">
      </ul>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="openSelectedTable()">–í—ñ–¥–∫—Ä–∏—Ç–∏</button>
        <button onclick="editSelectedTableSchema()">–ó–º—ñ–Ω–∏—Ç–∏</button>
        <button onclick="confirmDeleteTable()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeSavedTablesDialog()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="deleteTableConfirmModal" class="modal" style="display: none; z-index: 1000;">
    <div class="modal-content">
      <p id="deleteTableConfirmText">–í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é?</p>
      <div style="margin-top: 1em; text-align: right;">
        <button onclick="doDeleteTable()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeDeleteTableConfirmModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="reportCreatorModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:90%; max-width:1200px; height:90%; border-radius:10px; display:flex; flex-direction:column;">
      <h2 id="reportTitle">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤—ñ—Ç—É</h2>
      <div style="margin-bottom: 15px;">
        <label for="reportNameInput">–ù–∞–∑–≤–∞ –∑–≤—ñ—Ç—É:</label>
        <input type="text" id="reportNameInput" value="–ù–æ–≤–∏–π –∑–≤—ñ—Ç" style="width:calc(100% - 100px); padding:8px; font-size:16px;">
      </div>
      <div style="margin-bottom: 5px; display: flex; align-items: center; justify-content: space-between;">
        <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –∑ –∫–Ω–æ–ø–∫–∞–º–∏ + —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ -->
        <div style="display: flex; align-items: center; gap: 10px;height:30px;">
          <button onclick="addReportLabel()">–ù–∞–ø–∏—Å</button>
          <button onclick="addReportField()">–ü–æ–ª–µ</button>
          <button onclick="addReportGrid()">–°—ñ—Ç–∫–∞</button>
          <button onclick="openTextOptions()">–¢–µ–∫—Å—Ç</button>
          <div id="fieldSelectionPanel" style="display:none; width:auto; height:30px;">
            <div style="display: flex; gap: 5px; height:30px;">
              <select id="fieldPanelTableSelect" style="padding:5px;">
              </select>
              <select id="fieldPanelFieldSelect" style="padding:5px;">
              </select>
            </div>
          </div>
        </div>
        <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞: –ö–Ω–æ–ø–∫–∞ "–í–∏–¥–∞–ª–∏—Ç–∏" -->
        <div>
          <button onclick="deleteActiveElement()" style="color: #900;">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
        </div>
      </div>
      <div id="reportCanvas" style="flex-grow:1; border:1px solid #ccc; background-color:#f9f9f9; position:relative; overflow:auto;">
      </div>
      <div style="text-align: right; margin-top: 20px;">
        <button onclick="previewReport()">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
        <button onclick="saveReport()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button onclick="closeReportCreatorModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <div id="fieldSelectionPopup" style="display:none; position:absolute; z-index:10001; background-color:#ffffe0; border:1px solid #ccc; padding:8px 12px; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.2); font-size:14px; text-align:center;"> –í–∏–±—ñ—Ä –ø–æ–ª—è –¥–∞–Ω–∏—Ö </div>
  <div id="textOptionsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h3>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É</h3>
      <label for="fontFamilySelect">–®—Ä–∏—Ñ—Ç:</label>
      <select id="fontFamilySelect">
        <option value="Arial">Arial</option>
        <option value="Verdana">Verdana</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Courier New">Courier New</option>
        <option value="Georgia">Georgia</option>
        <option value="Palatino Linotype">Palatino Linotype</option>
      </select>
      <label for="fontSizeInput">–†–æ–∑–º—ñ—Ä (px):</label>
      <input type="number" id="fontSizeInput" value="16" min="8" max="72">
      <label for="fontColorInput">–ö–æ–ª—ñ—Ä:</label>
      <input type="color" id="fontColorInput" value="#000000">
      <div class="checkbox-group">
        <label>
          <input type="checkbox" id="fontWeightToggle"> –ñ–∏—Ä–Ω–∏–π </label>
        <label>
          <input type="checkbox" id="fontStyleToggle"> –ö—É—Ä—Å–∏–≤ </label>
        <label>
          <input type="checkbox" id="textDecorationUnderline"> –ü—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–∏–π </label>
        <label>
          <input type="checkbox" id="textDecorationStrikethrough"> –ó–∞–∫—Ä–µ—Å–ª–µ–Ω–∏–π </label>
      </div>
      <div class="button-group">
        <button onclick="closeTextOptionsModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ–≥–æ –∑–≤—ñ—Ç—É -->
  <div id="reportPreviewModal" class="modal" style="display:none; z-index: 20000;">
    <div class="modal-content" style="background: white; width: 90%; max-width: 1000px; position: relative;">
      <h2 id="reportPreviewTitle" style="margin-top: 0;">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –∑–≤—ñ—Ç—É</h2>
      <div id="reportPreviewCanvas" style="border: 1px solid #ccc; min-height: 400px; position: relative; background: #fff;">
      </div>
      <div style="text-align: right; margin-top: 20px;">
        <button onclick="printReportPreview()">–î—Ä—É–∫—É–≤–∞—Ç–∏</button>
        <button onclick="closeReportPreview()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- –í—ñ–∫–Ω–æ –≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∑–≤'—è–∑–∫—ñ–≤-->
  <div id="relationModal" class="modal" style="display:none; z-index:15000;">
    <div class="modal-content" style="width: 98%; height: 90vh; max-width: none; background:white; position:relative;">
      <h2>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–≤‚Äô—è–∑–∫—ñ–≤</h2>
      <div id="relationCanvas" style="position:relative; flex-grow:1; height:calc(100% - 100px); border:1px solid #ccc; background:#f9f9f9;">
      </div>
      <div style="text-align:right; margin-top:10px;">
        <button onclick="saveRelations()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button  class="close-btn" onclick="closeRelationModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!--- -->
  <div id="formCreatorModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">    
    <div id="formCreatorModalContent" style="background:#fff; padding:20px; width:90%; max-width:1200px; height:90%; border-radius:10px; display:flex; flex-direction:column;">
      <h2>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ñ–æ—Ä–º–∏</h2>
      <div style="margin-bottom: 15px;">
        <label for="formNameInput">–ù–∞–∑–≤–∞ —Ñ–æ—Ä–º–∏:</label>
        <input type="text" id="formNameInput" value="–ù–æ–≤–∞ —Ñ–æ—Ä–º–∞" style="width:calc(100% - 100px); padding:8px; font-size:16px;">
      </div>
      <div style="margin-bottom: 5px; display: flex; height:30px; align-items: center; gap: 10px;justify-content: space-between;">
       <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –∑ –∫–Ω–æ–ø–∫–∞–º–∏ + —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ -->
       <div style="display: flex; align-items: center; gap: 10px;height:30px;"> 
        <button onclick="addFormLabel()">–ù–∞–ø–∏—Å</button>
        <button onclick="addFormField()">–ü–æ–ª–µ</button>
        <button onclick="addFormGrid()">–°—ñ—Ç–∫–∞</button>
        <button onclick="openTextOptions()">–¢–µ–∫—Å—Ç</button>
        <div id="fieldSelectionPanel1" style="display:none; width:30%; height:30px; position: relative;">
          <div style="display: flex; gap: 5px; height:30px;">
            <select id="fieldPanelTableSelect1" style="flex-grow: 1; padding:5px;">
            </select>
            <select id="fieldPanelFieldSelect1" style="flex-grow: 1; padding:5px;">
            </select>
          </div>
        </div>
      <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞: –ö–Ω–æ–ø–∫–∞ "–í–∏–¥–∞–ª–∏—Ç–∏" -->  
      </div>
          <button onclick="deleteActiveElement()" style="color: #900;">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</button>
      </div>
           
    <div id="formCanvas" style="flex-grow:1; border:1px solid #ccc; background-color:#f9f9f9; position:relative; width:100%; height:100%;overflow:auto;">
      </div>
      <div style="text-align: right; margin-top: 20px;">
        <button onclick="previewForm()">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
        <button onclick="saveForm()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button onclick="closeFormModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Ñ–æ—Ä–º–∏ -->
  <div id="formPreviewModal" class="modal" style="display:none; width:calc(100% + 100px);">
    <div id="formPreviewModalContent" style="position:relative; width:55%; height:70%; min-width: 280px; max-width: 800px; border-radius:10px; z-index: 2; background:#ccc; padding: 10px; overflow: hidden;">
      <h3 id="formPreviewTitle">–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ñ–æ—Ä–º–∏</h3>
      <!-- ‚úÖ canvas –º–∞—î –±—É—Ç–∏ –æ–∫—Ä–µ–º–∏–º –±–ª–æ–∫–æ–º -->
      <div id="formPreviewCanvas" style="border:1px solid #ccc; position:relative; background:white; overflow:auto; height: 80%; margin-bottom: 10px;">
      </div>
      <!-- üîΩ –ü–∞–Ω–µ–ª—å –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó -->
      <div id="formNavigationPanel" style="display: flex; gap: 5px;">
        <button onclick="goToFirstRecord()">‚èÆ</button>
        <button onclick="goToPreviousRecord()">‚óÄ</button>
        <button onclick="goToNextRecord()">‚ñ∂</button>
        <button onclick="goToLastRecord()">‚è≠</button>
        <button onclick="createNewRecord()">‚ûï –ù–æ–≤–∏–π</button>
      </div>
      <div style="text-align: right;">
        <button onclick="saveFormChanges()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button onclick="document.getElementById('formPreviewModal').style.display='none'">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- üîΩ –í–∏–±—ñ—Ä —Ç–∞–±–ª–∏—Ü—ñ, –≤ —è–∫—É –±—É–¥–µ –∑—Ä–æ–±–ª–µ–Ω–æ —ñ–º–ø–æ—Ä—Ç -->
  <div id="csvImportModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>–û–±–µ—Ä—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—é –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É CSV</h3>
      <select id="csvTargetTable" style="width:100%; padding:10px; font-size:16px;">
      </select>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="proceedCsvImport()">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
        <button onclick="closeCsvImportDialog()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- üîΩ –í—ñ–¥–æ–º–æ—Å—Ç—ñ –ø—Ä–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö -->
  <div id="dbInfoModal" class="modal" style="display:none;">
    <div class="modal-content" style="max-width: 500px; background:#fff;">
      <h3>–í—ñ–¥–æ–º–æ—Å—Ç—ñ –ø—Ä–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö</h3>
      <div id="dbInfoContent" style="white-space: pre-wrap; margin-top: 10px;">
      </div>
      <div style="text-align: right; margin-top: 20px;">
        <button onclick="closeDbInfoModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- üîΩ –í—ñ–∫–Ω–æ –≤–∏—Ö–æ–¥—É –∑ –ø—Ä–æ–≥—Ä–∞–º–∏ -->
  <div id="exitModal" class="modal" style="display:none;">
    <div class="modal-content" style="background:#fff; text-align:center; font-size:24px;"> –î–æ –∑—É—Å—Ç—Ä—ñ—á—ñ! </div>
  </div>
  <!-- üîΩ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –∑–≤—ñ—Ç—ñ–≤ -->
  <div id="reportListModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; max-height:80%; overflow-y:auto;">
      <h3>–°—Ç–≤–æ—Ä–µ–Ω—ñ –∑–≤—ñ—Ç–∏</h3>
      <ul id="reportList" style="list-style:none; padding:0;">
      </ul>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="previewSelectedReport()">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
        <button onclick="editSelectedReport()">–ó–º—ñ–Ω–∏—Ç–∏</button>
        <button onclick="deleteSelectedReport()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeReportList()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- üîΩ –í—ñ–∫–Ω–æ –ø–µ—Ä–µ–≥–ª—è–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö —Ñ–æ—Ä–º -->
  <div id="savedFormsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:1000; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; width:400px; border-radius:10px; max-height:80%; overflow-y:auto;">
      <h3>–°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–æ—Ä–º–∏</h3>
      <ul id="savedFormsList" style="list-style:none; padding:0;">
      </ul>
      <div style="text-align:right; margin-top:15px;">
        <button onclick="previewSelecteForm()">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
        <button onclick="editSelectedForm()">–ó–º—ñ–Ω–∏—Ç–∏</button>
        <button onclick="deleteSelectedForm()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
        <button onclick="closeSavedFormsDialog()">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
    </div>
  </div>
  <!-- üîΩ –í—ñ–∫–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è SQL-–∑–∞–ø–∏—Ç—É -->
  <div id="ownSqlModal" class="modal" style="display: none;">
        <div class="modal-content" style="width: 600px; max-width: 90%; background: #fff; text-align: left;">
            <h3>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è SQL-–∑–∞–ø–∏—Ç—É</h3>
            <textarea id="ownSqlInput" style="width: 100%; height: 150px; margin-bottom: 10px; padding: 10px; box-sizing: border-box; border: 1px solid #ddd;"></textarea>
            <div style="text-align: right; margin-bottom: 15px;">
                <button onclick="executeOwnSQL()">–í–∏–∫–æ–Ω–∞—Ç–∏</button>
                <button onclick="closeOwnSqlModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
            </div>
            <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏:</h4>
            <div id="ownSqlResults" style="max-height: 300px; overflow: auto; border: 1px solid #eee; padding: 10px; background: #f9f9f9;">
                </div>
        </div>
    </div>
    <!-- üîΩ –í—ñ–∫–Ω–æ –ü—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É -->
    <div id="aboutModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
         background-color: rgba(0,0,0,0.5); z-index:10000; justify-content:center; align-items:center;">    
         <div style="background:#fff; padding:20px; width:400px; border-radius:10px; box-shadow: 0 0 10px #000;">        
            <h2>–ü—Ä–æ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ dat.A</h2>
            <p>dat.A - —Ü–µ –ø—Ä–æ—Å—Ç–∏–π –≤–µ–±–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —É –≤–∞—à–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ.
            <p>–í–µ—Ä—Å—ñ—è: 0.9 (–Ω–µ–æ—Ñ—ñ—Ü—ñ–π–Ω–∞)
            <p>–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –∑ –ª—é–±–æ–≤'—é –¥–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏ —Ç–∞ —Ç–∏—Ö, —Ö—Ç–æ —ó—ó –≤–∏–≤—á–∞—î.
            <div style="text-align: right; margin-bottom: 15px;">                
                <button onclick="closeAboutModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
            </div>
        </div>
    </div>
    <!-- üîΩ –í—ñ–∫–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –¥–ª—è SQL-–∑–∞–ø–∏—Ç—É -->
    <div id="parameterModal" class="modal" style="display:none; z-index:10000;">
      <div class="modal-content" style="background:white; padding:20px; border-radius:10px; max-width: 400px; margin: auto;">
        <h3 id="parameterPrompt">–í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è</h3>
        <input type="text" id="parameterInput" style="width:90%; padding:8px; font-size:16px;">
        <div style="text-align:right; margin-top:15px;">
          <button onclick="confirmParameter()">–û–ö</button>
          <button onclick="cancelParameter()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        </div>
      </div>
    </div>
    

</body>

</html>

<!DOCTYPE html>
<html>
<head>
    <style>
        #loading {
            position: absolute;
            top: 40%;
            left: 48%;
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        table, tr, td,tbody {
             border: none;
      }  
     </style>

    <meta charset="UTF-8">
    <title>Ð„Python - Programming is Easy!</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">    
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0">
    <script src="./lib/cm/codemirror.js"></script>
    <script src="./lib/cm/active-line.js"></script>
    <script src="./lib/cm/show-hint.js"></script>
    <script src="./lib/cm/python.js"></script>
    <script src="./lib/cm/xml.js"></script>
    <script src="./lib/cm/javascript.js"></script>
    <script src="./lib/cm/css.js"></script>
    <script src="./lib/cm/htmlmixed.js"></script>    
    <script src="./lib/cm/dialog.js"></script>       
    <script src="./lib/cm/searchcursor.js"></script>
    <script src="./lib/cm/search.js"></script>
    <script src="./lib/cm/searchbox.js"></script> 
              
    <link rel="stylesheet" href="./lib/cm/codemirror.css">    
    <link rel="stylesheet" href="./lib/cm/cobalt.css">
    <link rel="stylesheet" href="./lib/cm/blackboard.css">
    <link rel="stylesheet" href="./styles.css">
    <link rel="stylesheet" href="./lib/font-awesome.min.css">   
    <link rel="stylesheet" href="./jquery/ui/1.13.3/themes/base/jquery-ui.css">
    <script src="./lib/base.js"></script>
    <script src="./jquery/jquery-3.7.1.js"></script>
    <script src="./jquery/ui/1.13.3/jquery-ui.js"></script> 
    <script src="./lib/jq/jquery.ui.touch-punch.min.js"></script>
    <script src="./lib/lib_en.js"></script>
    <script src="./lib/skulpt/skulpt.min.js"></script>
    <script src="./lib/skulpt/skulpt-stdlib.js"></script>
    <script src="./lib/skulpt/deps/math.js"></script>
    <script src="./lib/skulpt/deps/chart.js"></script>
    <script src="./lib/skulpt/deps/p5.js"></script>
    <script src="./lib/extlibs.js"></script>
    <script src="./lib/jsfs.js"></script>
    <script src="./lib/filedialog-en.js"></script>
    <script src="./lib/customfile.js"></script>
    <script src="./lib/samplefile.js"></script>
</head>
<body>
    <div id="loading"></div>
	<img src="logo.png" id="logo" width="150" height="60">
    <div id="holder" class="holder" style="display:none">
        <span id="file_tabs"><span class="file_tab file_tab_selected">mycode.py</span></span>
        <pre>
            <div id="editor"></div>
        </pre>
    </div>
    <div id="myfilename.txt"></div>
    <script>
        var uhash = JSON.parse(localStorage.getItem('epythonHash')).key;
        var ustyle = JSON.parse(localStorage.getItem('epythonParam')).key;
		var assets = {};
		var embed = false; 
        if (ustyle) {embed =ustyle.startsWith("embed")}
		console.log(embed);
		$('#logo').show();
		$('#file_tabs').show();	
		if (embed) {
			$('#logo').hide();
			$('#file_tabs').hide();	
		}
		function encode(str) {
			return window.btoa(unescape(encodeURIComponent(str)));
		}
		function decode(str) {
			return decodeURIComponent(escape(window.atob(str)));
		}
		
		console.log('hash:',uhash);
        
		var uuhash=decode(uhash.substring(1));		
        var files = uuhash;
        
        try {
            PythonIDE.files = JSON.parse(files);
        } catch (e) {
            PythonIDE.files['mycode.py'] = files;
        }
		
        PythonIDE.currentFile = 'mycode.py';
        PythonIDE.projectName = 'mycode.py'.replace(".py", "");
        PythonIDE.updateFileTabs();
    </script>
    <div id="hintBar"></div>
    
    <span id="footer">
        <img title="Run" alt="Click to run code" id="btn_run" class="toolButton" src="./media/play.png">
        <img alt="Stop execution" title="Stop" class="toolButton hiddenButton" src="./media/stop.png" id="btn_stopRunning">
        <img alt="Click to show/hide buttons" title="Show/hide buttons" class="toolButton" src="./media/ttools.png" id="btn_tools">
        <img title="Open console" alt="Console - show or hide console window" id="btn_show_output" class="toolButton hiddenButton" src="./media/console.png">
        <img title="Download and retrieve files" alt="Files - download and retrieve" id="btn_show_share" class="toolButton hiddenButton" src="./media/share.png">
        <img title="Settings" alt="Configure screen" id="btn_show_settings" class="toolButton hiddenButton" src="./media/settings.png">
    </span>
   
    <div id="recover" title="Code Recovery" style="display:none"></div>
    <div id="dlg" title="mycode.py" style="display:none">        
        <div id="p5Sketch"></div>
        <div id="output"></div>        
        <canvas id="myChart" style="width:100%;max-width:600px;max-height:800px;background-color: #CCC;display:none"></canvas>
    </div>
    <div id="save" title="Files - save, retrieve, recover" style="display:none;">
        <fieldset>
            <legend>Save current file:</legend>

            <div class="save_option" style="background-color: #82ffab;" id="btnDownload">
                <h2><i class="fa fa-save" ></i> Save </h2>
                <p>The current file will be downloaded to this computer.</p>
               
                <h3><i class="fa fa-keyboard-o"></i> Ctrl + Alt + S</h3>
            </div>
        </fieldset>

        <fieldset>
            <legend>Load file:</legend>            
				<input type="file" id="file-btn" hidden/>
				<label for="file-btn" style="cursor: pointer;">
				<div class="box__input" style="background-color:#e9ff89;border-radius: 0.3rem;padding:1rem;border: 1px solid #ccc;">
					<i class="fa fa-cloud-upload"></i>	
					Select a Python file to upload it from your computer into the editor
				</div>	
				</label>   
                <br>
                  <div id="btn_show_recover" class="toolButton" style="margin-left:auto;margin-right: 5em;"><button name="btn_show_recover"><i class="fa fa-history"></i> Recover </button>
				  </div> 
        </fieldset><br><br>
		<fieldset>	   
	    <legend>Resource file loading</legend>
            <div class="save_option" style="background-color: #cab4ff;" id="btn_PGZ" name="btn_PGZ">
                <h2><i class="fa fa-folder-open-o" ></i> File Manager</h2>
                <p>Here you can add files for your projects</p>               
                
            </div>	   
	   </fieldset>
    </div>

    <div id="project_settings" title="Project" style="display:none">
        <p>Renaming the project will help you organize saved code</p>
        <label for="txt_project_name">Project name:</label><input id="txt_project_name" name="txt_project_name"
            value="mycode">
        <button id="btn_project_ok">OK</button>
        <button id="btn_project_cancel">Cancel</button>
    </div>
    <div id="file_settings" title="File" style="display:none">
        <p>Be careful: if you choose to delete a file, you won't be able to recover it unless you save a copy</p>
        <label for="txt_file_name">Rename file:</label><input id="txt_file_name" name="txt_file_name" value="">
        <button id="btn_file_rename">Rename</button>
        <button id="btn_file_delete">Delete</button>
        <button id="btn_file_cancel">Cancel</button>
    </div>

    <div id="settings" title="Settings" style="display:none">
        <fieldset>
            <legend>Font sizes</legend>
            <label for="txt_code_size"  >Code Editor font size: </label><input type="text" id="txt_code_size" readonly>
            <div id="slider_code_size" class="slider"></div>
            <label for="txt_output_size">Console text font size:</label><input type="text" id="txt_output_size"
                readonly>
            <div id="slider_output_size" class="slider"></div>
        </fieldset>
        <fieldset>
            <legend>Editor colors</legend>
            <div id="radio_code_style">
                <p>Lighter colors are great for coding during the day. Some people prefer coding at night:</p>
                <input type="radio" id="radio_code_style_light" name="radio_code_style" checked="checked"><label
                    for="radio_code_style_light">Day</label>
                <input type="radio" id="radio_code_style_dusk" name="radio_code_style"><label
                    for="radio_code_style_dusk">Dusk</label>
                <input type="radio" id="radio_code_style_dark" name="radio_code_style"><label
                    for="radio_code_style_dark">Night</label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Console colors</legend>
            <p>Darker colors resemble a command line. Lighter ones resemble an app window:</p>
            <div id="radio_output_style">
                <input type="radio" id="radio_output_style_light" name="radio_output_style"><label
                    for="radio_output_style_light">Day</label>
                <input type="radio" id="radio_output_style_dusk" name="radio_output_style"><label
                    for="radio_output_style_dusk">Dusk</label>
                <input type="radio" id="radio_output_style_dark" name="radio_output_style" checked="checked"><label
                    for="radio_output_style_dark">Night</label>
            </div>
        </fieldset>
        <fieldset>
            <legend>Run mode</legend>
            <p>Running code line by line can be a helpful way to debug</p>
            <div id="radio_run_mode">
                <input type="radio" id="radio_run_mode_all" name="radio_run_mode" checked><label
                    for="radio_run_mode_all">Whole program</label>
                <input type="radio" id="radio_run_mode_single" name="radio_run_mode"><label
                    for="radio_run_mode_single">Step-by-step</label>
                <input type="radio" id="radio_run_mode_anim" name="radio_run_mode"><label
                    for="radio_run_mode_anim">Line animation</label>
            </div>
            <p>Choosing a longer delay between animating each line will help you understand and explain the code during its execution.</p>
            <label for="txt_step_anim_time">Delay time between each line:</label><input type="text"
                id="txt_step_anim_time" readonly>
            <div id="slider_step_anim_time" class="slider"></div>
            <p>Making the output window transparent lets you see your code underneath it</p>
            <label for="txt_output_transparency">Window transparency</label><input type="text" id="txt_output_transparency"
                readonly>
            <div id="slider_output_transparency" class="slider"></div>
        </fieldset>
    </div>
    <dialog id='filemanager'> 
	</div>
	
<script src="./lib/addfuncs.js"></script> 

</body>
</html>
